window.MR=window.MR||{},function(define,require,requirejs){define("lib/BaseComponent",["require","backbone-amd","lodash","ENV","lib/analytics/main"],function(e){var t=e("backbone-amd"),n=e("lodash"),i=e("ENV"),r=e("lib/analytics/main"),a=t.Model.extend({create:function(){},render:function(){},exports:{},deprecated:!1,constructor:function(e){if(t.Model.apply(this,arguments),this.deprecated&&window.MR&&MR.spaceConfig&&"dev"===MR.spaceConfig.env&&window.console&&window.console.warn){var n=e&&e.type?e.type:this.get("id"),i="The '"+n+"' component version you're using is "+"deprecated! Upgrade it to the latest version to get new "+"features and improvements. See "+"https://github.com/MassRelevance/builder-sdk/tree/master/dev/components "+"for all available components and versions.";setTimeout(function(){window.console.warn(i)},5e3)}},initialize:function(){var e=this.get("config")||{},t=this.get("id");this.set("dispatcher",i.scope(t,e.type)),this.set("analytics",new r({scope:"component",componentID:t,componentType:e.type}));var n=this.styles;n&&n.render&&n.render(e)},hasElement:function(){var e=this.get("config")||{};return!(!e.$el||!e.$el.length)}}),o=a.extend;return a.extend=function(){var e=o.apply(a,arguments);return e.exports=function(){var t=n.extend({},e.prototype.exports);return t.create=function(t,i){var r={id:t,config:i},a=new e(r),o=a.create();return n.extend({},r,o,{render:function(){a.render()}})},t},e},a}),define("components/sponsor-bar-1/models/SponsorBarModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=n.Model.extend({defaults:{url:"",image_url:"",width:"",ada_text:""},initialize:function(e){this.set(t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults))))}});return i}),function(){var e=function(){function e(e){return e=e||"",/^\//.test(e)||(e=(t[""]||"/static/")+e),Object.prototype.hasOwnProperty.call(t,e)?t[e]:/^\/[^/]/.test(e)?n+e:e}var t={"/components/stream-1/static/loader.gif":"//massrel-all.massrel.io/static/loader.806ea8a06eb29c46cd9526449bae2fe4f5bb3f32.gif","/bower_components/slick/slick/ajax-loader.gif":"//massrel-all.massrel.io/static/ajax-loader.cbaaf95d6d5deeba0a91daf32211cf2322a6b17a.gif","/bower_components/background-size-polyfill/backgroundsize.htc":"//massrel-all.massrel.io/static/backgroundsize.b2ff01ef7655fd1530917b80515fd9e0314b61a7.htc","/bower_components/background-size-polyfill/backgroundsize.min.htc":"//massrel-all.massrel.io/static/backgroundsize.min.b0d1854ee9ebbd813a6b51f532ee73e0ce8efd51.htc","/bower_components/background-size-polyfill/src/intro.htc":"//massrel-all.massrel.io/static/intro.0c14d48d70564e8ffa48ee33e2921b8218db405d.htc","/bower_components/background-size-polyfill/src/outro.htc":"//massrel-all.massrel.io/static/outro.36f6a8a39a184d57a5702cadd67b724349a169ce.htc","/bower_components/background-size-polyfill/src/outro.min.htc":"//massrel-all.massrel.io/static/outro.min.a1b29828ed01b4cbb8f535ed4f043533546d6fc6.htc","/bower_components/background-size-polyfill/images/pattern.png":"//massrel-all.massrel.io/static/pattern.9b07f090653ce990ab10dfedcf1a96691b3bacc0.png","/bower_components/q/q.png":"//massrel-all.massrel.io/static/q.258d66f8de01d842f625aa30760a1e554be8c5e5.png","/bower_components/background-size-polyfill/images/algeria.jpg":"//massrel-all.massrel.io/static/algeria.8fba62617211caf29109e87ce78891879722f7b9.jpg","/bower_components/background-size-polyfill/images/algerian1.jpg":"//massrel-all.massrel.io/static/algerian1.5367f7f1990e616e0d250f33f514c61efab22bb2.jpg","/bower_components/background-size-polyfill/images/algerian2.jpg":"//massrel-all.massrel.io/static/algerian2.c16f28605fe02294c344952bdd85d447cf28ea41.jpg","/bower_components/background-size-polyfill/images/jar1.jpg":"//massrel-all.massrel.io/static/jar1.81059f90ef0f79d947601a5b35d874920dd502f6.jpg","/bower_components/background-size-polyfill/images/jar2.jpg":"//massrel-all.massrel.io/static/jar2.494a9249331a960aed0b0a587dad07adf0697c4d.jpg","/bower_components/background-size-polyfill/images/parthenon.jpg":"//massrel-all.massrel.io/static/parthenon.41f0bb0e566a150afca4c169b035eb1423b418ff.jpg","/bower_components/background-size-polyfill/images/propylaea.jpg":"//massrel-all.massrel.io/static/propylaea.99b5c36e446ffa9bd712d04b50ddd271516829c7.jpg","/bower_components/slick/slick/fonts/slick.eot":"//massrel-all.massrel.io/static/slick.2dc80ee445f351c8c621d093f9d8e2a0e631217c.eot","/bower_components/socialite-0/fonts/socialite-0-12-0.eot":"//massrel-all.massrel.io/static/socialite-0-12-0.d2736df7255a214a5512a4d7ad254f5fc5d6790e.eot","/bower_components/socialite/fonts/socialite-1-7-0.eot":"//massrel-all.massrel.io/static/socialite-1-7-0.d19f34bf6e20df46b6a9a9df86143f931b42724d.eot","/bower_components/slick/slick/fonts/slick.ttf":"//massrel-all.massrel.io/static/slick.edd0d35f739ec686c398e773c644bcc05f73e5f6.ttf","/bower_components/socialite-0/fonts/socialite-0-12-0.ttf":"//massrel-all.massrel.io/static/socialite-0-12-0.5f8c46974a09d3f2e5004dcb935aa93d6e6b7bf1.ttf","/bower_components/socialite/fonts/socialite-1-7-0.ttf":"//massrel-all.massrel.io/static/socialite-1-7-0.20cafbfd8bd1f1b0d1db0d0742097239dce069e8.ttf","/bower_components/slick/slick/fonts/slick.woff":"//massrel-all.massrel.io/static/slick.27f38483a2a6a9a19cd7571b6158edcfd292b8a1.woff","/bower_components/socialite-0/fonts/socialite-0-12-0.woff":"//massrel-all.massrel.io/static/socialite-0-12-0.e93f6ffdcc5e828475d0cfc68687ee8269a0a5e1.woff","/bower_components/socialite/fonts/socialite-1-7-0.woff":"//massrel-all.massrel.io/static/socialite-1-7-0.82a559c38b0c4c7c8308ea775a0f1823c8df7115.woff","/bower_components/q/q.svg":"//massrel-all.massrel.io/static/q.d9845f22bbf9fdc8f4a44850d38de16bdf882062.svg","/bower_components/slick/slick/fonts/slick.svg":"//massrel-all.massrel.io/static/slick.17f63c6f6131389462ba3d814b7ddf83344705f9.svg","/bower_components/socialite-0/fonts/socialite-0-12-0.svg":"//massrel-all.massrel.io/static/socialite-0-12-0.85676defe22336506594cb454de38b77b1f93133.svg","/bower_components/socialite/fonts/socialite-1-7-0.svg":"//massrel-all.massrel.io/static/socialite-1-7-0.93306ac00917c637a044a0e7309c103177bf4eff.svg","/static/js/css3-mediaqueries.js":"//fox-sports.massrel.io/template-static-4ddad65eabf815efe8d6aba77e4644c7e6eb7b7b/js/css3-mediaqueries.js","/static/js/html5-shiv.js":"//fox-sports.massrel.io/template-static-4ddad65eabf815efe8d6aba77e4644c7e6eb7b7b/js/html5-shiv.js","/static/js/index.js":"//fox-sports.massrel.io/template-static-4ddad65eabf815efe8d6aba77e4644c7e6eb7b7b/js/index.js","/static/loader.gif":"//fox-sports.massrel.io/template-static-4ddad65eabf815efe8d6aba77e4644c7e6eb7b7b/loader.gif","":"//fox-sports.massrel.io/template-static-4ddad65eabf815efe8d6aba77e4644c7e6eb7b7b/"},n="";return e.setPrefix=function(e){n=e},e},t=e();"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("staticPath",[],function(){return t}):module.exports=t,"object"==typeof MR&&(MR.staticPath=t)}(),define("templateCompiler",["require","lodash","TemplateStore","staticPath"],function(e){var t=e("lodash"),n=e("TemplateStore"),i=e("staticPath"),r={staticPath:i},a=function(e){return function(i){i=i||{};var a=e.fn;if(e.metadata.customizable){var o=n.get(this.componentId&&this.componentId(),this.componentType&&this.componentType(),e.name);a=o||a}var s=t.merge({},r,i),l=Array.prototype.slice.call(arguments);return l[0]=s,a.apply(null,l)}};return{compile:a}}),define("tmpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("tmpl!sponsor-bar",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<a href="'+__e(url)+'">\n  <span class="ada-text">'+__e(ada_text)+'</span>\n  <div class="sponsor-bar">\n    <img src="'+__e(image_url)+'" style="width: '+__e(width)+'">\n  </div>\n</a>';return __p},metadata:{customizable:!0},name:"sponsor-bar"})}),define("components/sponsor-bar-1/views/SponsorBarView",["require","lodash","lib/views/BaseView","tmpl!sponsor-bar"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!sponsor-bar"),r=n.extend({className:"sponsor-bar",template:i,events:{click:"trackAnalyticsClick"},initialize:function(){this.listenTo(this.model,"change",t.bind(this.render,this))},trackAnalyticsClick:function(e){var t=e.target.closest("a").href;return this.analytics().trackEvent({category:"viz:sponsor",action:t}),this}});return r}),define("componentStyle",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("componentStyle!sponsor-bar-1",{render:function(){}}),define("components/sponsor-bar-1/main",["require","jquery","lib/BaseComponent","components/sponsor-bar-1/models/SponsorBarModel","components/sponsor-bar-1/views/SponsorBarView","componentStyle!sponsor-bar-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("components/sponsor-bar-1/models/SponsorBarModel"),r=e("components/sponsor-bar-1/views/SponsorBarView"),a=e("componentStyle!sponsor-bar-1");return n.extend({styles:a,create:function(){var e=this.get("id"),n=this.get("config"),a=this.get("dispatcher"),o=new i({id:e,dispatcher:a,config:n.settings}),s=new r({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,model:o});return this.set("model",o),this.set("view",s),{model:o,view:s}},render:function(){if(this.hasElement()){this.get("view").render();var e=this.attributes.config.settings.image_url.length;0===e&&t(".sponsor-bar").find("img").remove()}}}).exports()}),define("lib/views/BaseButtonView",["require","lib/views/BaseView"],function(e){var t=e("lib/views/BaseView"),n=t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:disabled",function(e,t){this.$el.toggleClass("disabled",t)})}});return n}),define("components/load-more-1/models/LoadMoreButtonModel",["lodash","backbone-amd"],function(e,t){return t.Model.extend({defaults:{buttonText:"Load More",useScrollEvents:!1,isMobileSafari:!1},constructor:function(n,i){var r=this;n=e.pick(n,e.keys(r.defaults)),t.Model.call(r,n,i)}})}),define("tmpl!load-more-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<span class="button-text">'+__e(buttonText)+"</span>";return __p},metadata:{},name:"load-more-button"})}),define("components/load-more-1/views/LoadMoreButtonView",["jquery","underscore","lib/views/BaseButtonView","components/load-more-1/models/LoadMoreButtonModel","tmpl!load-more-button"],function(e,t,n,i,r){return n.extend({tagName:"div",className:function(){return"button load-more-button "+(this.model.get("useScrollEvents")&&!this.model.get("isMobileSafari")?"hidden":"")},template:r,initialize:function(e){n.prototype.initialize.apply(this,arguments);var t=this;return t.dispatcher=t._closest("dispatcher"),void 0===e.model&&(t.model=new i),this.isButtonPresentable=!this.model.get("useScrollEvents")||this.model.get("isMobileSafari"),t},hide:function(){this.$el.hide()},show:function(){this.isButtonPresentable&&this.$el.show()},render:function(){var e=this;return n.prototype.render.apply(e,arguments),e.$el.data("view-id",e.cid),e.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),e.$el.on("click",function(){e.dispatcher.trigger("load-more",t.noop)}),e}})}),define("componentStyle!load-more-1",{render:function(){}}),define("components/load-more-1/main",["require","jquery","lodash","lib/BaseComponent","components/load-more-1/views/LoadMoreButtonView","components/load-more-1/models/LoadMoreButtonModel","componentStyle!load-more-1"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/BaseComponent"),r=e("components/load-more-1/views/LoadMoreButtonView"),a=e("components/load-more-1/models/LoadMoreButtonModel"),o=e("componentStyle!load-more-1"),s=t(window),l=function(e,n,i){this.config=e,this.id=n,this.dispatcher=i,this.scrollElement=this.config.settings.scrollElement||window,this.scrollContent=this.config.settings.scrollElement||document.body,this.$el=t("#"+n),this.config.settings.isMobileSafari=navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/),this.config.settings.useScrollEvents="scroll"===this.config.settings.type,this.model=new a(this.config.settings),this.smartSize=(MR.spaceConfig.smart_size||"true"===MR.ENV.hash.local_smart_resize)&&"true"!==MR.ENV.hash["pgb-infinite-scroll-local"],this.isSpaceEmbedded=MR.isSpaceEmbedded(),"true"===MR.ENV.hash["pgb-infinite-scroll-local"]&&(MR.parent.trigger("pgb:noresize",{}),MR.resize({scrolling:!0})),this.view=new r({dispatcher:i,componentType:e.type,componentId:n,model:this.model})};return l.prototype.bindScrollEvent=function(){if(!this.config.settings.isMobileSafari&&this.config.settings.useScrollEvents)if(this.isSpaceEmbedded&&this.smartSize)MR.parent.trigger("scroll:listen",{belowFrame:!0}),MR.parent.on("scroll:end",n.bind(function(){this.loadMore()},this));else{var e=t(this.scrollElement),i=n.bind(n.debounce(function(){this.shouldLoadMore()&&this.loadMore()},this.config.settings.eventThrottle),this);e.on("scroll",i)}},l.prototype.loadMore=function(){this.dispatcher.trigger("load-more",n.bind(function(){this.ensuringFilled&&this.ensureFilled()},this))},l.prototype.hideButton=function(){this.ensuringFilled=!1,this.view.hide()},l.prototype.showButton=function(){this.view.show()},l.prototype.shouldLoadMore=function(){var e=t(this.scrollContent),n=e[0],i=document.documentElement,r=window.pageYOffset||n.scrollTop||i.scrollTop;(!this.config.settings.isMobileSafari||this.config.settings.isMobileSafari&&!this.innerHeight)&&(this.innerHeight=window.innerHeight||n.clientHeight||i.clientHeight||0);var a;return a=Math.max(n.scrollHeight,i.scrollHeight,n.offsetHeight,i.offsetHeight,n.clientHeight,i.clientHeight),(!this.smartSize||!this.isSpaceEmbedded)&&r+this.innerHeight>=a||this.ensuringFilled&&this.minimumHeight>a?!0:(this.ensuringFilled=!1,!1)},l.prototype.render=function(){this.$el.html(this.view.render().el),this.bindScrollEvent(),this.smartSize&&(this.minimumHeight=this.config.settings.useScrollEvents?MR.ENV.hash.vph:s.outerHeight(!0)),this.minimumHeight=this.minimumHeight||0},l.prototype.ensureFilled=function(){this.ensuringFilled=!0,n.delay(n.bind(function(){this.shouldLoadMore()&&this.loadMore()},this),500)},i.extend({styles:o,exports:{LoadMoreButton:l,LoadMoreButtonView:r,LoadMoreButtonModel:a},create:function(){var e=new l(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("loadMoreButton",e),{loadMoreButton:e}},render:function(){this.hasElement()&&this.get("loadMoreButton").render()}}).exports()}),define("massrel-js-backbone-2/backbone",["require","backbone-amd"],function(e){var t=e("backbone-amd");return(window["massrel-js-backbone"]||window).Backbone||t}),define("massrel-js-backbone-2/MediaModel",["require","./backbone","lodash"],function(e){var t=e("./backbone"),n=e("lodash");return t.Model.extend({defaults:function(){return{type:{},size:"large",provider:{},providerName:"",photo_urls:{},embed_url:"",embed_html:"",caption:"",description:"",link:"",duration:0,videos:{},height:0,width:0}},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);if(e.size&&e.photo_urls[e.size])e.photo_url=e.photo_urls[e.size].url;else{var i=n.first(n.values(e.photo_urls));e.photo_url=i?i.url:""}return e}})}),define("massrel-js/globals",{host:"api.massrelevance.com",timeout:1e4,protocol:"https:"===document.location.protocol?"https":"http",min_poll_interval:5e3,max_backoff_interval:6e4,backoff_rate:1.8,jsonp_param:"jsonp"}),define("massrel-js/helpers",["./globals"],function(e){var t={},n=encodeURIComponent;t.step_through=function(e,n,i){e=t.is_array(e)?e:[e];var r=e.length-1;if(r>=0)for(;r>=0;r--)for(var a=e[r],o=0,s=n.length;s>o;o++)n[o].call(i,a)},t.extend=function(e,t){var n;for(n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e},t.api_url=function(t,n){n=n||e.host;var i=e.port,r=e.protocol+"://"+n+(i?":"+i:"");return r+t},t.req={},t.req.supportsXhr2=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,t.req.supportsCors=t.req.supportsXhr2||"XDomainRequest"in window,t.req.supportsJSON="JSON"in window,t.req.xdr=function(n,i,r,a,o,s,l,c){var u,d,h=!1;l||(l="GET");var p=function(e){h=!0;var n,i=!1;try{n=JSON.parse(e)}catch(r){i=!0,m(new Error("JSON parse error"))}i||("function"==typeof o?o(n):t.is_array(o)&&o.length>0&&t.step_through(n,o,a))},m=function(e){h=!0,"function"==typeof s&&s(e)};window.XMLHttpRequest&&t.req.supportsXhr2?u=new XMLHttpRequest:window.XDomainRequest&&(u=new XDomainRequest),u?(u.open(l,n+"?"+t.to_qs(i)),u.timeout=e.timeout,u.onerror=m,u.onprogress=function(){},u.ontimeout=m,u.onload=function(){p(u.responseText)},u.send(c),d=setTimeout(function(){h||(u.onerror=function(){},u.onprogress=function(){},u.ontimeout=function(){},u.onload=function(){},u.abort&&u.abort(),m())},e.timeout)):m(new Error("CORS not supported"))},t.req.jsonp=function(n,r,a,o,s,l){var c,u=a+ ++i,d=!1;e._json_callbacks[u]=function(n){"function"==typeof s?s(n):t.is_array(s)&&s.length>0&&t.step_through(n,s,o),delete e._json_callbacks[u],d=!0,clearTimeout(c)},r.push([e.jsonp_param,"massrel._json_callbacks."+u]);var h=t.load(n+"?"+t.to_qs(r));c=setTimeout(function(){d||(e._json_callbacks[u]=function(){delete e._json_callbacks[u]},"function"==typeof l&&l(),h.stop())},e.timeout)},t.jsonp_factory=t.req.jsonp;var i=0;e._json_callbacks={},t.request_factory=function(e,n,i,r,a,o){t.req.supportsCors&&t.req.supportsJSON?t.req.xdr(e,n,i,r,a,o):t.req.jsonp(e,n,i,r,a,o)},t.post_factory=function(e,n,i,r,a,o,s){if(!t.req.supportsCors||!t.req.supportsJSON)throw"POST not supported";t.req.xdr(e,n,r,a,o,s,"POST",i)},t.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.is_number=function(e){return"[object Number]"===Object.prototype.toString.call(e)};var r=document.getElementsByTagName("head")[0]||document.body;t.load=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e;var i=!1;return n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),"function"==typeof t&&t())},r.insertBefore(n,r.firstChild),{stop:function(){n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n.src="#"}}},t.to_qs=function(e){var i,r=[];if(e&&e.length){for(var a=0,o=e.length;o>a;a++){if(i=e[a][1],t.is_array(i)){for(var s=[],l=0,c=i.length;c>l;l++)s[l]=n(i[l]||"");i=s.join(",")}else i=void 0!==i&&null!==i?n(i):"";r.push(n(e[a][0])+"="+i)}return r.join("&")}return""};var a=/\+\d{4} \d{4}$/,o=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+\d{4})$/,s=/^(\d{4})-(\d\d)-(\d\d)T(\d\d)\:(\d\d)\:(\d\d)\.(\d{3})Z$/;return t.fix_date=t.fix_twitter_date=function(e){if(e=e.toString(),a.test(e)){e=e.split(" ");var t=e.pop();e.splice(3,0,t),e=e.join(" ")}else o.test(e)?e=e.replace(o,"$1/$2/$3 $4:$5:$6 $7"):s.test(e)&&(e=e.replace(s,"$1/$2/$3 $4:$5:$6 +0000"));return e},t.parse_params=function(e){e=e||window.location.search.substring(1);var t={};if("?"===e.charAt(0)&&(e=e.substring(1)),e.length>0){e=e.replace(/\+/g," ");for(var n=e.split(/[&;]/g),i=0;i<n.length;i++){var r=n[i].split("="),a=decodeURIComponent(r[0]),o=r.length>1?decodeURIComponent(r[1]):"";if(a in t){var s=t[a];"string"!=typeof s?t[a].push(o):(t[a]=[],t[a].push(s),t[a].push(o))}else t[a]=o}}return t},t.poll_interval=function(t){var n=e.min_poll_interval;return Math.max(t||n,n)},t.poll_backoff=function(t,n){var i=e.max_backoff_interval;return i>t&&(n=Math.max(n-1,0),t*=Math.pow(e.backoff_rate,n),t=Math.min(t||i,i)),t},t.callback_group=function(e){e=e||1;var t=0,n=!0,i=function(i,r){return function(){if(n){if(e>=t)return i.apply(r||this,arguments);throw new Error("Callback group max call count exceeded")}}};return i.deactivate=function(){n=!1},i},t.timeParam=function(e,t,n,i){"undefined"!=typeof e&&(e.getTime&&(e=e.getTime()/1e3),e=+e,!isNaN(e)&&e>0?(e=60*Math.floor(e/60),n.push([t,e])):!isNaN(e)&&i&&0>=e&&n.push([t,e]))},t.always=function(e){var t=new $.Deferred;if(void 0===e)return t.resolve(),t.promise();void 0===e.length&&(e=[e]);var n=e.length,i=function(){n--,0===n&&t.resolve()};return $.each(e,function(){this.always(i)}),t.promise()},t}),define("massrel-js/generic_poller_cycle",["./helpers"],function(e){function t(t,n,i){this.cg=e.callback_group(),this.skip=this.cg(t),this.callback=this.cg(n),this.errback=this.cg(i),this._enabled=!0}return t.prototype.enabled=function(){return this._enabled},t.prototype.disable=function(){this.cg.deactivate(),this._enabled=!1},t}),define("massrel-js/generic_poller",["./helpers","./generic_poller_cycle"],function(e,t){function n(i,r){var a,o=this,s=function(){if(u){var r=e.callback_group(),a=r(l),s=function(t){if(o.consecutive_errors=0,n.failure_mode=o.failure_mode=!1,u){for(var i=0,r=o._filters.length;r>i;i++)t=o._filters[i].call(o,t);e.step_through([t],o._listeners,o),u&&a()}},d=function(){o.consecutive_errors+=1,n.failure_mode=o.failure_mode=!0,a(!0)};c=new t(a,s,d),o.fetch(i,o.opts,c)}},l=function(t){var n=e.poll_interval(1e3*o.frequency);t&&(n=e.poll_backoff(n,o.consecutive_errors)),a=setTimeout(s,n)},c=null,u=!1;this._listeners=[],this._filters=[],this.object=i,this.opts=r||{},this.frequency=this.opts.frequency||30,this.alive_count=0,this.consecutive_errors=0,this.failure_mode=!1,this.start=function(){return u||(u=!0,s()),this},this.stop=function(){return c&&(c.disable(),c=null),clearTimeout(a),u=!1,this}}return n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.data=function(e){return this._listeners.push(e),this},n.prototype.filter=function(e){return this._filters.push(e),this},n.failure_mode=!1,n}),define("massrel-js/poller_queue",["./helpers"],function(e){function t(t,n){function i(){if(!o&&r.length>0&&"function"==typeof a){var e=++s;l.enqueued-=1,l.count+=1;var t=r.shift();o=!0,a.call(l,t,function(){e===s&&(o=!1,setTimeout(i,0))})}}this.poller=t,n=e.extend(n||{},{});var r=[],a=null,o=!1,s=0;this.total=0,this.enqueued=0,this.count=0;var l=this;t.batch(function(e){for(var t=e.length,n=t-1;n>=0;n--)r.push(e[n]);l.total+=t,l.enqueued+=t,i()}),this.next=function(e){o||"function"!=typeof e||(a=e,i())}}return t}),define("massrel-js/poller",["./helpers","./generic_poller","./poller_queue"],function(e,t,n){function i(e,n){t.call(this,e,n),this.stream=this.object,this.filter(this.filter_newer),n=this.opts,this.newest_timestamp=n.newest_timestamp||null,this.stay_realtime="stay_realtime"in n?!!n.stay_realtime:!0,this.hail_mary_mode=!!n.hail_mary_mode,this.first=!0}return e.extend(i.prototype,t.prototype),i.prototype.fetch=function(t,n,i){var r=this,a={start_id:null},o=this.stay_realtime?"since_id":"from_id";return a[o]=r.since_id,n=e.extend({},n),this.first&&(n=e.extend(n.initial||{},n),delete n.initial),a=e.extend(a,n),this.cursorable()||delete a.since_id,t.load(a,function(e){i.enabled()&&(e&&e.length>0&&(r.since_id=e[0].entity_id,r.start_id||(r.start_id=e[e.length-1].entity_id)),i.callback(e),a.timeframe&&r.first&&r.stop(),r.first=!1)},i.errback),this},i.prototype.batch=function(e){return this.data(i.createEnumerator(e,!1))},i.prototype.each=function(e){return this.data(i.createEnumerator(e,!0))},i.prototype.queue=function(e){var t=new n(this);return t.next(e),this},i.prototype.more=function(t,n){var i=this,r=function(){i.object.load(e.extend({start_id:i.start_id,since_id:null},i.opts),function(e){e.length>0&&(i.start_id=e[e.length-1].entity_id,i.since_id||(i.since_id=e[0].entity_id)),t.call(i,e)},function(){"function"==typeof n&&n()})};return r(),this},i.prototype.cursorable=function(){return!(t.failure_mode||this.failure_mode||this.hail_mary_mode)},i.prototype.filter_newer=function(e){return e=i.filter_newer(e,this.newest_timestamp),e&&e.length>0&&(this.newest_timestamp=e[0].queued_at),e},i.prototype.poke=function(){return this},i.createEnumerator=function(t,n){return n?function(n){n&&n.length>0&&e.step_through(n,[t],this)}:function(e){e&&e.length>0&&t.call(this,e)}},i.filter_newer=function(e,t){var n="queued_at";if(e&&e.length>0){var i=this.limit||1/0;if(t)if(e[0][n]<=t)e=[];else if(e[e.length-1][n]>t)e.length>i&&e.splice(this.limit,e.length-i);else{for(var r=[],a=0,o=e.length;o>a&&r.length<i;a++){var s=e[a];if(!(s[n]>t))break;r.push(s)}e=r}else e.length>i&&e.splice(this.limit,e.length-i)}return e},i}),define("massrel-js/meta_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.meta(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/top_things_poller",["./helpers","./generic_poller"],function(e,t){function n(e,n){n.thing=n.thing||"hashtags","number"==typeof n.resolution&&(n.resolution=n.resolution+"s"),t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return"number"==typeof t.resolution&&(t.resolution=t.resolution+"s"),e.topThings(t,n.callback,n.errback),this},n.mostRecentBucket=function(e){if(e.data&&e.data.length>0){for(var t=e.data.length-1;t>=0;t--)if(e.data[t].things&&e.data[t].things.length>0)return e.data[t];if(-1===t)return e.data[e.data.length-1]}return null},n.prototype.each=n.prototype.data,n}),define("massrel-js/stream_keyword_insights",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}return n.prototype.url=function(){return this.stream.keyword_insights_url()},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var r=this.params(t);return e.request_factory(this.url(),r,"_",this,function(){"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(e){e=e||{};var t=[];return e.topics&&t.push(["topics","1"]),"start"in e&&t.push(["start",e.start]),"finish"in e&&t.push(["finish",e.finish]),e.resolution&&t.push(["resolution",e.resolution]),e.countries&&t.push(["countries",e.countries]),t},n}),define("massrel-js/stream_activity",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}var i=encodeURIComponent;n.prototype.url=function(){return e.api_url("/"+i(this.stream.account)+"/"+i(this.stream.stream_name)+"/activity.json")},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var r=this.params(t);return e.request_factory(this.url(),r,"_",this,function(i){if(i&&(!t.verbose||"0"===t.verbose)&&e.is_array(i.activity))for(var r=i.activity,a=0,o=r.length;o>a;a++){var s=i.start+i.period_size*a;r[a]=e.extend(r[a],{start:s,finish:Math.min(s+i.period_size,i.finish)})}"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(t){t=t||{};var n=[];return t.view?n.push(["view",t.view]):t.topic&&n.push(["topic",t.topic]),e.timeParam(t.start,"start",n,!0),e.timeParam(t.finish,"finish",n,!0),"periods"in t&&n.push(["periods",t.periods]),t.resolution&&n.push(["resolution",t.resolution]),"tz_offset"in t&&n.push(["tz_offset",t.tz_offset]),t.encode&&n.push(["encode",t.encode]),n.push(["verbose",0]),n};var r=function(e,t,i){n.prototype[e]=function(){return this.defaults[t]=i,this}};return r("approved","view","approved"),r("pending","view","pending"),r("rejected","view","rejected"),r("minutes","resolution","1m"),r("ten_minutes","resolution","10m"),r("hours","resolution","1h"),r("days","resolution","1d"),n}),define("massrel-js/stream",["./helpers","./poller","./meta_poller","./top_things_poller","./stream_keyword_insights","./stream_activity"],function(e,t,n,i,r,a){function o(){var e=1===arguments.length?arguments[0].split("/"):arguments;this.account=e[0],this.stream_name=e[1],this._enumerators=[]}var s=encodeURIComponent;return o.prototype.stream_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+".json")},o.prototype.meta_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/meta.json")},o.prototype.top_things_url=function(t){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/top_"+t+".json")},o.prototype.keyword_insights_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/keyword_insights.json")},o.prototype.load=function(t,n,i){t=e.extend(t||{},{});var r=this.buildParams(t);return e.request_factory(this.stream_url(),r,"_",this,n||this._enumerators,i),this},o.prototype.buildParams=function(t){t=t||{};var n=[];return t.limit&&n.push(["limit",t.limit]),t.since_id?n.push(["since_id",t.since_id]):t.from_id?n.push(["from_id",t.from_id]):(t.start_id||t.start)&&n.push(["start",t.start_id||t.start]),t.replies&&n.push(["replies","1"]),t.geo_hint&&n.push(["geo_hint","1"]),t.from&&n.push(["from",t.from]),t.keywords&&n.push(["keywords",t.keywords]),t.lang&&n.push(["lang",t.lang]),t.network&&n.push(["network",t.network]),t.timeline_search&&n.push(["timeline_search","1"]),t.page_links&&n.push(["page_links","1"]),t.klout&&n.push(["klout","1"]),t.timeframe&&(e.timeParam(t.timeframe.start,"timeframe[start]",n),e.timeParam(t.timeframe.finish,"timeframe[finish]",n)),t.strip_links&&n.push(["strip_links","1"]),n},o.prototype.each=function(e){return this._enumerators.push(e),this},o.prototype.poller=function(e){return new t(this,e)},o.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var r=this.buildMetaParams(t);return e.request_factory(this.meta_url(),r,"meta_",this,n,i),this},o.prototype.buildMetaParams=function(e){e=e||{};var t=[];return e.all_topics&&t.push(["all_topics",e.all_topics]),e.disregard&&t.push(["disregard",e.disregard]),e.num_minutes&&t.push(["num_minutes",e.num_minutes]),e.num_hours&&t.push(["num_hours",e.num_hours]),e.num_days&&t.push(["num_days",e.num_days]),e.num_trends&&t.push(["num_trends",e.num_trends]),e.num_links&&t.push(["num_links",e.num_links]),e.num_hashtags&&t.push(["num_hashtags",e.num_hashtags]),e.num_contributors&&t.push(["num_contributors",e.num_contributors]),e.top_periods&&t.push(["top_periods",e.top_periods]),e.top_periods_relative&&t.push(["top_periods_relative",e.top_periods_relative]),e.top_count&&t.push(["top_count",e.top_count]),e.finish&&t.push(["finish",e.finish]),e.networks&&t.push(["networks","1"]),(e.activity||0===e.activity)&&t.push(["activity",e.activity]),t},o.prototype.metaPoller=function(e){return new n(this,e)},o.prototype.keywordInsights=function(e){return new r(this,e)},o.prototype.topThings=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var r=this.buildTopThingsParams(t);return e.request_factory(this.top_things_url(t.thing),r,"top_things_",this,n,i),this},o.prototype.buildTopThingsParams=function(t){t=t||{};var n=[];if(t.resolution){var i;i=e.is_number(t.resolution)?t.resolution+"s":t.resolution,n.push(["resolution",i])}return t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),t.limit&&n.push(["limit",t.limit]),t.percent&&n.push(["percent","1"]),n},o.prototype.topThingsPoller=function(e){return new i(this,e)},o.prototype.activity=function(e){return new a(this,e)},o}),define("massrel-js/account",["./helpers","./meta_poller"],function(e,t){function n(e){this.user=e}var i=encodeURIComponent;return n.prototype.meta_url=function(){return e.api_url("/"+i(this.user)+".json")},n.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};
else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var r=this.buildMetaParams(t);return e.request_factory(this.meta_url(),r,"meta_",this,n,i),this},n.prototype.buildMetaParams=function(t){t=t||{};var n=[];if(t.quick_stats&&n.push(["quick_stats","1"]),t.streams){var i=e.is_array(t.streams)?t.streams:[t.streams];n.push(["streams",i.join(",")])}return t.num_minutes&&n.push(["num_minutes",t.num_minutes]),t.num_trends&&n.push(["num_trends",t.num_trends]),t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),n},n.prototype.metaPoller=function(e){return new t(this,e)},n.prototype.toString=function(){return this.user},n}),define("massrel-js/context",["./helpers"],function(e){function t(e){this.status=e,this.source={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},this.known=!1,this.intents=!0}return t.create=function(n,i){n=n||{};var r=new t(n);return i=e.extend(i||{},{intents:!0,retweeted_by:!0}),r.intents=i.intents,"undefined"!=typeof r.source[n.network]&&(r.source[n.network]=r.known=!0,r.sourceName=n.network),"google_plus"===n.network&&(r.source.google=r.known=!0,r.sourceName="google"),"massrelevance"===n.network&&(r.source.message=r.known=!0,r.sourceName="message"),r.source.twitter&&n.retweeted_status&&i.retweeted_by&&(r.retweet=!0,r.retweeted_by_user=n.user,r.status=n.retweeted_status),r},t.prototype.getPhotoUrl=function(){if(void 0!==this.photo_url)return this.photo_url;var e=!1;if(this.status&&this.known)if(this.source.twitter)if(this.status.entities.media&&this.status.entities.media.length){var t=this.status.entities.media[0];e={url:t.media_url,width:t.sizes.medium.w,height:t.sizes.medium.h,link_url:t.url||t.expanded_url}}else this.status.entities.urls&&this.status.entities.urls.length&&(e={url:this.status.entities.urls[0].expanded_url||this.status.entities.urls[0].url});else this.source.facebook&&(this.status.type&&"photo"===this.status.type||this.status.kind&&"photo"===this.status.kind)?e={url:this.status.picture.replace(/_[st]./,"_n.")}:this.source.google&&this.status.object.attachments.length&&"photo"===this.status.object.attachments[0].objectType?e={url:this.status.object.attachments[0].fullImage.url}:this.source.instagram&&"image"===this.status.type&&(e={url:this.status.images.standard_resolution.url});return this.photo_url=e,e},t}),define("massrel-js/compare_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/compare",["./helpers","./compare_poller"],function(e,t){function n(t){this.streams=e.is_array(t)?t.slice(0):"string"==typeof t?[t]:[]}return n.prototype.compare_url=function(){return e.api_url("/compare.json")},n.prototype.buildParams=function(e){var t=[];return e=e||{},e.streams&&t.push(["streams",e.streams]),(e.target||e.target>=0)&&t.push(["target",e.target.toString()]),e.precision&&e.precision>0&&t.push(["precision",e.precision]),t},n.prototype.load=function(t,n,i){"function"==typeof t&&(i=n,n=t,t=null);var r=this.buildParams(e.extend({streams:this.streams,precision:this.precision,target:this.target},t||{}));return e.request_factory(this.compare_url(),r,"meta_",this,n,i),this},n.prototype.poller=function(e){return new t(this,e)},n}),define("massrel-js/intents",["./helpers"],function(e){var t={base_url:"https://twitter.com/intent/",params:{text:"(string): default text, for tweet/reply",url:"(string): prefill url, for tweet/reply",hashtags:"(string): hashtag (or list with ,) without #, for tweet/reply",related:"(string): screen name (or list with ,) without @, available for all",in_reply_to:"(number): tweet id, only for reply",via:"(string): screen name without @, tweet/reply",tweet_id:"(number): tweet id, for retweet and favorite",screen_name:"(string): only for user/profile",user_id:"(number): only for user/profile",original_referer:'(string): url to display with related ("www.yahoo.com suggests you follow:")'},original_referer:window.top!==window.self&&document.referrer||null};return t.url=function(n,i){if(i=e.extend({},i||{}),void 0===i.original_referer&&t.original_referer&&(i.original_referer=t.original_referer),i.original_referer&&!/^https?:\/\//.test(i.original_referer)&&(i.original_referer="http://"+i.original_referer),i.hashtags&&navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)){var r=i.text?[i.text]:[];i.url&&(r.push(i.url),delete i.url),r.push("#"+i.hashtags.split(/\s*,\s*/).join(" #").replace(/^\s+|\s+$/gm,"")),delete i.hashtags,i.text=r.join(" ")}var a=[];for(var o in i)a.push([o,i[o]]);return t.base_url+encodeURIComponent(n)+"?"+e.to_qs(a)},t.tweet=function(e){return t.url("tweet",e)},t.reply=function(e,n){return n=n||{},n.in_reply_to=e,t.tweet(n)},t.retweet=function(e,n){return n=n||{},n.tweet_id=e,t.url("retweet",n)},t.favorite=function(e,n){return n=n||{},n.tweet_id=e,t.url("favorite",n)},t.user=function(e,n){return n=n||{},/^\d+$/.test(e+"")?n.user_id=e:n.screen_name=e,t.url("user",n)},t.profile=t.user,t}),define("massrel-js/search",["require","./helpers"],function(e){var t=e("./helpers"),n=function(e){this.apiToken=e};return n.prototype.url=function(){return t.api_url("/search/search.json")},n.prototype.fetch=function(e,n,i){return e=this.buildQueryString(e),t.request_factory(this.url(),e,"_",this,n,i),this},n.prototype.buildQueryString=function(e){var t=[];if("string"==typeof e.q&&t.push(["q",e.q]),e.filters&&(t=t.concat(this.buildParams(e.filters,"filter."))),e.views){var n,i;for(n in e.views)i=e.views[n],"boolean"==typeof i?t.push(["view."+n,i?"1":"0"]):t=t.concat(this.buildParams(i,"view."+n+"."))}return this.apiToken&&t.push(["api_token",this.apiToken]),t},n.prototype.buildParams=function(e,n){n=n||"";var i,r,a,o=[];for(i in e)for(r=e[i],t.is_array(r)||(r=[r]),a=0,len=r.length;len>a;a++){var s=r[a];"boolean"==typeof s&&(s=s?"1":"0"),o.push([n+i,s])}return o},n}),define("massrel-js/facebook_media_questions",["./helpers","./generic_poller"],function(e,t){function n(){}return n.prototype.url=function(){return e.api_url("/facebook/media_question.json")},n.prototype.buildParams=function(e){e=e||{};var t=[];return e.id&&t.push(["id",e.id]),e.page&&t.push(["page",e.page]),t},n.prototype.load=function(t,n,i){t=e.extend(t||{},{});var r=this.buildParams(t);return e.request_factory(this.url(),r,"_",this,n||this._enumerators,i),this},n.prototype.poller=function(e){return new t(this,e)},n}),define("massrel-js/massrel",["./globals","./helpers","./stream","./account","./stream_keyword_insights","./stream_activity","./generic_poller","./generic_poller_cycle","./poller","./meta_poller","./top_things_poller","./poller_queue","./context","./compare","./compare_poller","./intents","./search","./facebook_media_questions"],function(e,t,n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,_){e.Stream=n,e.Account=i,e.StreamKeywordInsights=r,e.StreamActivity=a,e.GenericPoller=o,e.GenericPollerCycle=s,e.Poller=l,e.MetaPoller=c,e.TopThingsPoller=u,e.PollerQueue=d,e.Context=h,e.Compare=p,e.ComparePoller=m,e.helpers=t,e.intents=f,e.Search=g,e.FacebookMediaQuestion=_;var v=t.parse_params();return v["massrel[host]"]&&(e.host=v["massrel[host]"]),e}),define("massrel-js",["massrel-js/massrel"],function(e){return e}),define("embedly/js/main",["jquery","massrel-js"],function(e,t){function n(e){this.data={key:"fd577f7497bf11e0b95d4040d3dc5c07",secure:i,url:e,maxwidth:"500"}}var i="https:"===location.protocol,r="embedly.massrelevance.com",a="d1gbi9ec0ujnws.cloudfront.net",o="//"+(i?a:r)+"/1/";return n.prototype.task=function(n,i){var r=new e.Deferred;return t.helpers.request_factory(o+n,[["key",this.data.key],["secure",this.data.secure?"true":"false"],["url",this.data.url],["maxwidth",this.data.maxwidth]],"_",this,function(e){r.resolve(e),e&&"function"==typeof i&&i(e)},function(){r.reject()}),r.promise()},n.prototype.oembed=function(e){return this.task("oembed",e)},n.prototype.preview=function(e){return this.task("preview",e)},function(e){return new n(e)}}),define("embedly/index",["./js/main"],function(e){return e}),define("embedly",["embedly/index"],function(e){return e}),define("media-meta/js/embedly-widget",["require","lodash"],function(e){var t=e("lodash"),n="//cdn.embedly.com/widgets/media.html?",i={url:"",image:"",video:"",video_secure:"true",type:"video/mp4",schema:"instagram"},r=function(e){var n=[];return t.each(e,function(e,t){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.join("&")},a=t.template('<iframe src="<%= src %>" scrolling="no" frameborder="0"></iframe>');return function(e,o){e=t.extend({},i,e),o=o||{},o.autoplay_video&&(e.autoplay="true"),o.loop_video&&(e.loop="1");var s=n+r(e);return a({src:s})}}),define("placeholder-image-generator/templates/base",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="<%= width %>" height="<%= height %>"><rect width="100%" height="100%" fill="<%= color %>"></rect><%= template %></svg>')}),define("placeholder-image-generator/templates/youtube",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg version="1.1" x="<%= (19 / 32) * width %>" y="<%= (5 / 8) * height %>" width="<%= width / 2 %>" height="<%= height / 2%>"      viewBox="0 0 792 1224" enable-background="new 0 0 792 1224"><path fill="#FFFFFF" d="M599.3,594.6c-4.6,0-9.9,2.4-14.6,7.1l0,93.8c4.7,4.7,10,7.1,14.6,7.1c8.1,0,11.7-5.9,11.7-21.4v-66.5    C611,599.2,607.4,594.6,599.3,594.6z"/><path fill="#FFFFFF" d="M297,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V569.8    h29.4v116c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V569.8H297L297,726L297,726z"/><path fill="#FFFFFF" d="M164,679.6c1.5,15.5-3.3,23.1-12.4,23.1s-13.9-7.7-12.4-23.1v-61.9c-1.5-15.5,3.2-22.7,12.4-22.7    c9.1,0,13.9,7.3,12.4,22.7L164,679.6L164,679.6z M193.3,620.8c0-16.7-3.4-29.2-9.3-37.1c-7.8-10.7-20.1-15.1-32.5-15.1    c-14,0-24.7,4.4-32.5,15.1c-6,7.9-9.3,20.6-9.3,37.3l0,55.6c0,16.6,2.9,28.1,8.9,35.9c7.8,10.7,20.5,16.3,32.9,16.3    s25.3-5.6,33.1-16.3c5.9-7.8,8.7-19.3,8.7-35.9V620.8L193.3,620.8z"/><path fill="#FFFFFF" d="M77.3,640.9V726H46.4v-85.1c0,0-32.1-104.3-38.7-123.8h32.5l21.7,81.5l21.6-81.5H116L77.3,640.9L77.3,640.9z    "/><g>    <path fill="#FFFFFF" d="M778.1,534c0,0-4.5-31.7-18.4-45.6c-17.6-18.3-37.3-18.4-46.3-19.5c-64.6-4.7-161.6-4.7-161.6-4.7h-0.2        c0,0-97,0-161.6,4.7c-9,1.1-28.7,1.2-46.3,19.5c-13.9,14-18.4,45.6-18.4,45.6s-4.6,37.2-4.6,74.4v34.9c0,37.2,4.6,74.4,4.6,74.4        s4.5,31.7,18.4,45.6c17.6,18.3,40.7,17.7,50.9,19.7c37,3.5,157,4.6,157,4.6s97.1-0.1,161.7-4.8c9-1.1,28.7-1.2,46.3-19.5        c13.8-14,18.4-45.6,18.4-45.6s4.6-37.2,4.6-74.4v-34.9C782.7,571.3,778.1,534,778.1,534z M422.3,726h-30.9V548.1h-32.5v-29.4        l97.5,0v29.4h-34V726z M533.7,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V571.3        h29.4v114.5c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V571.3h29.4V726z M640.4,679.6        c0,14.3-1.2,24.4-3.1,30.9c-3.7,11.5-11.9,17.5-23,17.5c-10,0-20.2-6-29.5-17.6l0,15.6h-27.8V518.7h27.8l0,67.6        c9-11.1,19.3-17.5,29.6-17.5c11.2,0,18.6,6.4,22.4,18c1.9,6.2,3.7,16.2,3.7,30.9V679.6z M701.9,702.5c6.9,0,10.9-3.7,12.5-11.2        c0.3-1.5,0.2-8.2,0.2-19.4H744v4.4c0,9-0.7,15.4-1,18.2c-0.9,6.2-3.1,11.8-6.5,16.8c-7.7,11.2-19.2,16.8-33.9,16.8        c-14.7,0-25.8-5.3-33.9-15.8c-5.9-7.7-9.8-19.2-9.8-35.7v-54.1c0-16.5,3.5-29.3,9.4-37.1c8.1-10.6,19.3-16.2,33.5-16.2        c14,0,25.2,5.6,33.1,16.2c5.9,7.8,9.1,19.9,9.1,36.4l0,31.6h-55.7v27.8C688.2,695.4,692.3,702.5,701.9,702.5z"/>    <path fill="#FFFFFF" d="M714.6,613.2c0-14.3-3.7-18.6-13-18.6c-9.4,0-13.3,3.9-13.3,18.4v17.1l26.3,0V613.2z"/></g></svg>')}),define("placeholder-image-generator/js/main",["require","lodash","../templates/base","../templates/youtube"],function(e){var t=e("lodash"),n="data:image/svg+xml;charset=utf-8,",i={width:480,height:360,color:"#333333",template:""},r=e("../templates/base"),a={youtube:e("../templates/youtube")};return function(e){if(e=t.extend({},i,e),""!==e.template){var o=a[e.template];e.template=o?o(e):""}return n+encodeURIComponent(r(e))}}),define("placeholder-image-generator/index",["./js/main"],function(e){return e}),define("placeholder-image-generator",["placeholder-image-generator/index"],function(e){return e}),define("media-meta/js/main",["require","lodash","embedly","q","massrel-js","./embedly-widget","placeholder-image-generator"],function(e){var t=e("lodash"),n=e("embedly"),i=e("q");e("massrel-js");var r=e("./embedly-widget"),a=e("placeholder-image-generator");i.stopUnhandledRejectionTracking();var o=["snappytv"],s=["snpy.tv"],l={promise:function(e,n){var r,a;return n=t.extend({},c,n),e&&t.isFunction(S[e.sourceName])?a=S[e.sourceName](e,n):(r=i.defer(),r.reject(),a=r.promise),a},embedlyPromise:function(e,r){var l=i.defer();if(r&&!r.use_embedly)l.reject();else{var c=[];n(e).preview().then(function(e){if(!e.error_code&&e.object){var n=k(e.object.type),i=x(e.provider_name);if((t.contains(o,e.provider_name.toLowerCase())||t.find(s,function(t){return e.original_url.indexOf(t)>=0}))&&(n.photo=!0),n.photo||n.video){var u={};!i.youtube||e.images&&e.images.length||(e.images=[{caption:null,height:360,size:16076,url:a({width:480,height:360,template:"youtube"}),width:480}]),e.images&&e.images.length&&t.each(m,function(t){u[t]=e.images[0]});var d={type:n,provider:i,providerName:p[e.provider_name]||e.provider_name,photo_urls:u,author:e.author_name};if(n.video&&e.object.html){var h=e.object.html.match(/src=\"(.*?)\"/);if(r.autoplay_video&&h&&h.length>1&&h[1]){var f=h[1]+"&autoplay=true";d.embed_html=e.object.html.replace(h[1],f)}else d.embed_html=e.object.html;d.width=e.object.width,d.height=e.object.height}c.push(d)}}0===c.length?l.reject():l.resolve(c)}).fail(function(){l.reject()})}return l.promise}},c={autoplay_video:!1,prefetch:!1,loop_video:!1,muted:!1,secure:!1,use_embedly:!0},u={link:!1,video:!1,photo:!1},d={image:"photo",animated_gif:"video",youtube_video_media:"video"},h={vine:!1,twitter:!1,facebook:!1,google:!1,getglue:!1,youtube:!1,instagram:!1,vimeo:!1},p={YouTube:"youtube",Vine:"vine",Twitter:"twitter",Facebook:"facebook",GetGlue:"getglue","Google+":"google",Instagram:"instagram",Vimeo:"vimeo"},m=["huge","large","medium","small","thumb"],f={huge:"_n.",large:"_n.",medium:"_a.",small:"_s.",thumb:"_t."},g={huge:"w1500-h1500",large:"w800-h800",medium:"w400-h400",small:"w200-h200",thumb:"w75-h75"},_={huge:"large",large:"large",medium:"medium",small:"small",thumb:"thumb"},v={huge:"standard_resolution",large:"standard_resolution",medium:"low_resolution",small:"thumbnail",thumb:"thumbnail"},b={huge:"maxres",large:"standard",medium:"high",small:"medium",thumb:"default"},y=/https?:\/\/[^/]*googleusercontent.com\/.*\/w[0-9]+-h[0-9]+\/.*/,w=/https?:\/\/video.twimg.com\/ext_tw_video\/.*?\/pu\/vid\/(.*?)x(.*?)\/.*?.mp4/,k=function(e,n){var i=e;e=d[e]||e;var r=t.extend({},u);return t.has(r,e)&&(r[e]=!0),n&&n.sourceNetwork&&n.sourceNetwork.facebook&&n.picture&&(r.photo=!0),r._originalType=i,r},x=function(e){e=p[e]||e;var n=t.extend({},h);return t.has(n,e)&&(n[e]=!0),n},M=function(e){return e&&e.user?"https://twitter.com/"+e.user.screen_name+"/status/"+e.id_str:""},S={twitter:function(e,n){var a=!1,o=!1,s=[],c=i.defer();if(e.entities&&(e.entities.media&&e.entities.media.length&&(a=!0,t.each(e.entities.media,function(i){var a,o={},l=k(i.type);if(t.each(_,function(e,t){a=i.sizes[e],o[t]={url:(n.secure?i.media_url_https:i.media_url)+":"+e,short_url:i.url,width:a.w,height:a.h}}),l.photo)s.push({provider:x("twitter"),providerName:"twitter",type:l,link:M(e),photo_urls:o,author:e.user.screen_name});else if(l.video){var c=t(i.video_info.variants).filter(function(e){return"video/mp4"===e.content_type}).map(function(e){var t=o.huge.width,n=o.huge.height,i=w.exec(e.url);return i&&(t=parseInt(i[1],10),n=parseInt(i[2],10)),{url:e.url,content_type:e.content_type,bitrate:e.bitrate,width:t,height:n}}).sortBy(function(e){return e.height*e.width}).reverse().value();"animated_gif"===l._originalType&&(n=t.extend({},n,{loop_video:!0}));var u=r({video:c[0].url,image:o.huge.url,url:M(e)},n);s.push({provider:x("twitter"),providerName:"twitter",type:l,link:M(e),photo_urls:o,embed_html:u,author:e.user.screen_name,duration:i.video_info.duration_millis,video:c})}})),e.entities.urls&&e.entities.urls.length)){a=!0,o=!0;var u=[];t.each(e.entities.urls,function(e){var t=l.embedlyPromise(e.expanded_url,n);u.push(t),t.then(function(e){s=s.concat(e)})}),i.allSettled(u).then(function(){0===s.length?c.reject():(t.each(s,function(t){t.link=M(e)}),c.resolve(s))})}return o||(a&&0!==s.length?c.resolve(s):c.reject()),c.promise},facebook:function(e,n){var r=i.defer(),a=k(e.type||e.kind,e);if("comment"===e.kind&&e.attachment&&"photo"===e.attachment.type&&(e.picture=e.attachment.media.image.src,a.photo=!0),a.video){var o=l.embedlyPromise(e.link,n);o.then(function(e){r.resolve(e)},function(){r.reject()})}else if(a.photo||a.link){var s={};if(e.images){var c=t.sortBy(e.images,"height"),u=m.slice().reverse();if(7===c.length)for(var d=[0,1,3,5,6],h=0;h<d.length;h++){var p=u[h],g=c[d[h]];s[p]={url:g.source,height:g.height,width:g.width}}else for(var h=0;h<u.length;h++){var g,p=u[h];g=h<c.length?c[h]:c[c.length-1],s[p]={url:g.source,height:g.height,width:g.width}}}else e.picture&&t.each(f,function(t,n){s[n]={url:e.picture}});var _;_=t.has(e,"from")?e.from.name:e.user.screen_name,r.resolve([{provider:x("facebook"),providerName:"facebook",type:a,photo_urls:s,link:e.link,name:e.name,caption:e.caption,description:e.description,author:_}]),r.author=t.has(e,"from")?e.from.name:e.user.screen_name}else r.reject();return r.promise},instagram:function(e,n){var r=i.defer();if(e.images){var a=k(e.type);if(a.photo||a.video){var o={};t.each(m,function(t){o[t]=e.images[v[t]],o[t].url=o[t].url.replace(/^https?:/,"")});var s=x("instagram"),c="instagram";if(a.photo)r.resolve([{provider:s,providerName:c,type:a,link:e.link,photo_urls:o,author:e.user.username}]);else if(a.video){var u=l.embedlyPromise(e.link,n);u.then(function(e){r.resolve(e)},function(){r.reject()})}}}else r.reject();return r.promise},google:function(e){var n=i.defer(),r=[];if(e.object&&e.object.attachments&&e.object.attachments.length){var a,o,s;t.each(e.object.attachments,function(n){a=k(n.objectType),a.photo&&(s=y.test(n.image.url),o={},t.each(m,function(e){o[e]=s?t.extend({},n.image,{url:n.image.url.replace(/w[0-9]+-h[0-9]+/,g[e])}):t.extend({},n.fullImage,{url:n.fullImage.url})}),r.push({provider:x("google"),providerName:"google",type:a,link:e.url,photo_urls:o,author:e.actor.displayName}))})}return 0===r.length?n.reject():n.resolve(r),n.promise},youtube:function(e,n){var r=i.defer();if(e.snippet){var o,s=k(e.kind),l={};t.each(m,function(t){var n=e.snippet.thumbnails[b[t]];n&&(l[t]=n,l[t].url=l[t].url.replace(/^https?:/,""),o||(o=l[t]))}),t.each(m,function(t){var n=e.snippet.thumbnails[b[t]];n||(l[t]=o,l[t].url=l[t].url.replace(/^https?:/,""))});var c=x("youtube"),u="youtube",d="//www.youtube.com/embed/"+e.youtube_video_id+"?rel=0";n.autoplay_video&&(d+="&autoplay=1");var h=t.map(l,function(e,t){var n=i.defer(),r=new Image;return r.onload=function(){this.width!==e.width&&this.height!==e.height?n.resolve([t,{width:e.width,height:e.height,url:a({width:e.width,height:e.height,template:"youtube"})}]):n.resolve([t,e])},r.src=e.url,n.promise});i.all(h).then(function(n){var i=t.zipObject(n);r.resolve([{provider:c,providerName:u,type:s,link:e.link,photo_urls:i,author:e.channelTitle,embed_url:d}])})}else r.reject();return r.promise},getglue:function(e){var n=i.defer(),r=[];if(e.object){var a=k(e.object.objectType),o={},s=x("getglue"),l="getglue";a.photo?(t.each(m,function(t){o[t]={url:e.object.link}}),r.push({provider:s,providerName:l,type:a,photo_urls:o,link:e.object.link})):a.video&&(t.each(m,function(t){o[t]={url:e.object.image}}),r.push({provider:s,providerName:l,type:a,photo_urls:o,link:e.object.link,author:e.user.username}))}return r.length>0?n.resolve(r):n.reject(),n.promise}};return l}),define("media-meta/index",["./js/main"],function(e){return e}),define("media-meta",["media-meta/index"],function(e){return e}),define("massrel-js-backbone-2/MediaCollection",["./backbone","./MediaModel","media-meta"],function(e,t){return e.Collection.extend({model:t})}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return St.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var n=!0;return h(function(){return n&&(r(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){_n[e]||(r(t),_n[e]=!0)}function s(e,t){return function(n){return f(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function c(){}function u(e,t){t!==!1&&z(e),p(this,e),this._d=new Date(+e._d)}function d(e){var t=M(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+o+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function h(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),qt.length>0)for(n in qt)i=qt[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function f(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function g(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function _(e,t){var n;return t=N(t,e),e.isBefore(t)?n=g(e,t):(n=g(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,i){var r,a;return null===i||isNaN(+i)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,r=bt.duration(n,i),b(this,r,e),this}}function b(e,t,n,i){var r=t._milliseconds,a=t._days,o=t._months;i=null==i?!0:i,r&&e._d.setTime(+e._d+r*n),a&&pt(e,"Date",ht(e,"Date")+a*n),o&&dt(e,ht(e,"Month")+o*n),i&&bt.updateOffset(e,a||o)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&j(e[i])!==j(t[i]))&&o++;return o+a}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=un[e]||dn[t]||t}return e}function M(e){var t,i,r={};for(i in e)n(e,i)&&(t=x(i),t&&(r[t]=e[i]));return r}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}bt[t]=function(r,a){var o,s,l=bt._locale[t],c=[];if("number"==typeof r&&(a=r,r=e),s=function(e){var t=bt().utc().set(i,e);return l.call(bt._locale,t,r||"")},null!=a)return s(a);for(o=0;n>o;o++)c.push(s(o));return c}}function j(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function C(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,n){return st(bt([e,11,31+t-n]),t,n).week}function T(e){return U(e)?366:365}function U(e){return 0===e%4&&0!==e%100||0===e%400}function z(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Ct]<0||e._a[Ct]>11?Ct:e._a[Dt]<1||e._a[Dt]>C(e._a[jt],e._a[Ct])?Dt:e._a[Tt]<0||e._a[Tt]>24||24===e._a[Tt]&&(0!==e._a[Ut]||0!==e._a[zt]||0!==e._a[Ft])?Tt:e._a[Ut]<0||e._a[Ut]>59?Ut:e._a[zt]<0||e._a[zt]>59?zt:e._a[Ft]<0||e._a[Ft]>999?Ft:-1,e._pf._overflowDayOfYear&&(jt>t||t>Dt)&&(t=Dt),e._pf.overflow=t)}function F(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function P(e){return e?e.toLowerCase().replace("_","-"):e}function q(e){for(var t,n,i,r,a=0;a<e.length;){for(r=P(e[a]).split("-"),t=r.length,n=P(e[a+1]),n=n?n.split("-"):null;t>0;){if(i=I(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&k(r,n,!0)>=t-1)break;t--}a++}return null}function I(e){var t=null;if(!Pt[e]&&It)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return Pt[e]}function N(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(bt.isMoment(e)||w(e)?+e:+bt(e))-+n,n._d.setTime(+n._d+i),bt.updateOffset(n,!1),n):bt(e).local()}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t,n,i=e.match(Yt);for(t=0,n=i.length;n>t;t++)i[t]=gn[i[t]]?gn[i[t]]:B(i[t]);return function(r){var a="";for(t=0;n>t;t++)a+=i[t]instanceof Function?i[t].call(r,e):i[t];return a}}function Y(e,t){return e.isValid()?(t=E(t,e.localeData()),hn[t]||(hn[t]=$(t)),hn[t](e)):e.localeData().invalidDate()}function E(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Et.lastIndex=0;i>=0&&Et.test(e);)e=e.replace(Et,n),Et.lastIndex=0,i-=1;return e}function A(e,t){var n,i=t._strict;switch(e){case"Q":return Jt;case"DDDD":return Kt;case"YYYY":case"GGGG":case"gggg":return i?en:Ot;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?tn:Lt;case"S":if(i)return Jt;case"SS":if(i)return Xt;case"SSS":if(i)return Kt;case"DDD":return Rt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ht;case"a":case"A":return t._locale._meridiemParse;case"x":return Qt;case"X":return Zt;case"Z":case"ZZ":return Wt;case"T":return Gt;case"SSSS":return Vt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Xt:At;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return At;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Z(Q(e.replace("\\","")),"i"))}}function R(e){e=e||"";var t=e.match(Wt)||[],n=t[t.length-1]||[],i=(n+"").match(ln)||["-",0,0],r=+(60*i[1])+j(i[2]);return"+"===i[0]?-r:r}function O(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[Ct]=3*(j(t)-1));break;case"M":case"MM":null!=t&&(r[Ct]=j(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[Ct]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Dt]=j(t));break;case"Do":null!=t&&(r[Dt]=j(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=j(t));break;case"YY":r[jt]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[jt]=j(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[Tt]=j(t);break;case"m":case"mm":r[Ut]=j(t);break;case"s":case"ss":r[zt]=j(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Ft]=j(1e3*("0."+t));break;case"x":n._d=new Date(j(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=R(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=j(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function L(e){var n,i,r,a,o,s,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,s=4,i=t(n.GG,e._a[jt],st(bt(),1,4).year),r=t(n.W,1),a=t(n.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,i=t(n.gg,e._a[jt],st(bt(),o,s).year),r=t(n.w,1),null!=n.d?(a=n.d,o>a&&++r):a=null!=n.e?n.e+o:o),l=lt(i,r,a,s,o),e._a[jt]=l.year,e._dayOfYear=l.dayOfYear}function V(e){var n,i,r,a,o=[];if(!e._d){for(r=W(e),e._w&&null==e._a[Dt]&&null==e._a[Ct]&&L(e),e._dayOfYear&&(a=t(e._a[jt],r[jt]),e._dayOfYear>T(a)&&(e._pf._overflowDayOfYear=!0),i=it(a,0,e._dayOfYear),e._a[Ct]=i.getUTCMonth(),e._a[Dt]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=r[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Tt]&&0===e._a[Ut]&&0===e._a[zt]&&0===e._a[Ft]&&(e._nextDay=!0,e._a[Tt]=0),e._d=(e._useUTC?it:nt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Tt]=24)}}function H(e){var t;e._d||(t=M(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],V(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function G(t){if(t._f===bt.ISO_8601)return X(t),void 0;t._a=[],t._pf.empty=!0;var n,i,r,a,o,s=""+t._i,l=s.length,c=0;for(r=E(t._f,t._locale).match(Yt)||[],n=0;n<r.length;n++)a=r[n],i=(s.match(A(a,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),c+=i.length),gn[a]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(a),O(a,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(a);t._pf.charsLeftOver=l-c,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&t._a[Tt]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Tt]<12&&(t._a[Tt]+=12),t._isPm===!1&&12===t._a[Tt]&&(t._a[Tt]=0),V(t),z(t)}function Q(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e){var t,n,r,a,o;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(a=0;a<e._f.length;a++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[a],G(t),F(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==r||r>o)&&(r=o,n=t));h(e,n||t)}function X(e){var t,n,i=e._i,r=rn.exec(i);if(r){for(e._pf.iso=!0,t=0,n=on.length;n>t;t++)if(on[t][1].exec(i)){e._f=on[t][0]+(r[6]||" ");break}for(t=0,n=sn.length;n>t;t++)if(sn[t][1].exec(i)){e._f+=sn[t][0];break}i.match(Wt)&&(e._f+="Z"),G(e)}else e._isValid=!1}function K(e){X(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function tt(t){var n,i=t._i;i===e?t._d=new Date:w(i)?t._d=new Date(+i):null!==(n=Nt.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?K(t):y(i)?(t._a=et(i.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof i?H(t):"number"==typeof i?t._d=new Date(i):bt.createFromInputFallback(t)}function nt(e,t,n,i,r,a,o){var s=new Date(e,t,n,i,r,a,o);return 1970>e&&s.setFullYear(e),s}function it(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function rt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function at(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function ot(e,t,n){var i=bt.duration(e).abs(),r=Mt(i.as("s")),a=Mt(i.as("m")),o=Mt(i.as("h")),s=Mt(i.as("d")),l=Mt(i.as("M")),c=Mt(i.as("y")),u=r<pn.s&&["s",r]||1===a&&["m"]||a<pn.m&&["mm",a]||1===o&&["h"]||o<pn.h&&["hh",o]||1===s&&["d"]||s<pn.d&&["dd",s]||1===l&&["M"]||l<pn.M&&["MM",l]||1===c&&["y"]||["yy",c];
	return u[2]=t,u[3]=+e>0,u[4]=n,at.apply({},u)}function st(e,t,n){var i,r=n-t,a=n-e.day();return a>r&&(a-=7),r-7>a&&(a+=7),i=bt(e).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(e,t,n,i,r){var a,o,s=it(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:r,a=r-s+(s>i?7:0)-(r>s?7:0),o=7*(t-1)+(n-r)+a+1,{year:o>0?e:e-1,dayOfYear:o>0?o:T(e-1)+o}}function ct(t){var n,i=t._i,r=t._f;return t._locale=t._locale||bt.localeData(t._l),null===i||r===e&&""===i?bt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),bt.isMoment(i)?new u(i,!0):(r?y(r)?J(t):G(t):tt(t),n=new u(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ut(e,t){var n,i;if(1===t.length&&y(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function dt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),C(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ht(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?dt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function mt(e,t){return function(n){return null!=n?(pt(this,e,n),bt.updateOffset(this,t),this):ht(this,e)}}function ft(e){return 400*e/146097}function gt(e){return 146097*e/400}function _t(e){bt.duration.fn[e]=function(){return this._data[e]}}function vt(e){"undefined"==typeof ender&&(yt=xt.moment,xt.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,yt,wt,kt="2.8.4",xt="undefined"!=typeof global?global:this,Mt=Math.round,St=Object.prototype.hasOwnProperty,jt=0,Ct=1,Dt=2,Tt=3,Ut=4,zt=5,Ft=6,Pt={},qt=[],It="undefined"!=typeof module&&module&&module.exports,Nt=/^\/?Date\((\-?\d+)/i,Bt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,$t=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Et=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,At=/\d\d?/,Rt=/\d{1,3}/,Ot=/\d{1,4}/,Lt=/[+\-]?\d{1,6}/,Vt=/\d+/,Ht=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wt=/Z|[\+\-]\d\d:?\d\d/gi,Gt=/T/i,Qt=/[\+\-]?\d+/,Zt=/[\+\-]?\d+(\.\d{1,3})?/,Jt=/\d/,Xt=/\d\d/,Kt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,an="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),un={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},dn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hn={},pn={s:45,m:45,h:22,d:26,M:11},mn="DDD w W M D d".split(" "),fn="M D H h m s w W".split(" "),gn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return f(this.year()%100,2)},YYYY:function(){return f(this.year(),4)},YYYYY:function(){return f(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+f(Math.abs(e),6)},gg:function(){return f(this.weekYear()%100,2)},gggg:function(){return f(this.weekYear(),4)},ggggg:function(){return f(this.weekYear(),5)},GG:function(){return f(this.isoWeekYear()%100,2)},GGGG:function(){return f(this.isoWeekYear(),4)},GGGGG:function(){return f(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return j(this.milliseconds()/100)},SS:function(){return f(j(this.milliseconds()/10),2)},SSS:function(){return f(this.milliseconds(),3)},SSSS:function(){return f(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(j(e/60),2)+":"+f(j(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(j(e/60),2)+f(j(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_n={},vn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];mn.length;)wt=mn.pop(),gn[wt+"o"]=l(gn[wt],wt);for(;fn.length;)wt=fn.pop(),gn[wt+wt]=s(gn[wt],2);gn.DDDD=s(gn.DDD,3),h(c.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=bt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,r,a){var o;return"boolean"==typeof r&&(a=r,r=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=r,o._strict=a,o._isUTC=!1,o._pf=i(),ct(o)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),bt.min=function(){var e=[].slice.call(arguments,0);return ut("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return ut("isAfter",e)},bt.utc=function(t,n,r,a){var o;return"boolean"==typeof r&&(a=r,r=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=t,o._f=n,o._strict=a,o._pf=i(),ct(o).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var i,r,a,o,s=e,l=null;return bt.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=Bt.exec(e))?(i="-"===l[1]?-1:1,s={y:0,d:j(l[Dt])*i,h:j(l[Tt])*i,m:j(l[Ut])*i,s:j(l[zt])*i,ms:j(l[Ft])*i}):(l=$t.exec(e))?(i="-"===l[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:a(l[2]),M:a(l[3]),d:a(l[4]),h:a(l[5]),m:a(l[6]),s:a(l[7]),w:a(l[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(o=_(bt(s.from),bt(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),r=new d(s),bt.isDuration(e)&&n(e,"_locale")&&(r._locale=e._locale),r},bt.version=kt,bt.defaultFormat=an,bt.ISO_8601=function(){},bt.momentProperties=qt,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},bt.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Pt[e]||(Pt[e]=new c),Pt[e].set(t),bt.locale(e),Pt[e]):(delete Pt[e],null)},bt.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!y(e)){if(t=I(e))return t;e=[e]}return q(e)},bt.isMoment=function(e){return e instanceof u||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof d};for(wt=vn.length-1;wt>=0;--wt)S(vn[wt]);bt.normalizeUnits=function(e){return x(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return j(e)+(j(e)>68?1900:2e3)},h(bt.fn=u.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Y(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=Y(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var i,r,a,o=N(e,this),s=6e4*(this.zone()-o.zone());return t=x(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),a=this-bt(this).startOf("month")-(o-bt(o).startOf("month")),a-=6e4*(this.zone()-bt(this).startOf("month").zone()-(o.zone()-bt(o).startOf("month").zone())),r+=a/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:m(r)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=N(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,bt(t)))},isLeapYear:function(){return U(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=rt(e,this.localeData()),this.add(e-t,"d")):t},month:mt("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):(n=bt.isMoment(e)?+e:+bt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):(n=bt.isMoment(e)?+e:+bt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):(n=+bt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=R(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?b(this,bt.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return C(this.year(),this.month())},dayOfYear:function(e){var t=Mt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=st(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=mt("Milliseconds",!1),bt.fn.second=bt.fn.seconds=mt("Seconds",!1),bt.fn.minute=bt.fn.minutes=mt("Minutes",!1),bt.fn.hour=bt.fn.hours=mt("Hours",!0),bt.fn.date=mt("Date",!0),bt.fn.dates=a("dates accessor is deprecated. Use date instead.",mt("Date",!0)),bt.fn.year=mt("FullYear",!0),bt.fn.years=a("years accessor is deprecated. Use year instead.",mt("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,h(bt.duration.fn=d.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,a=this._months,o=this._data,s=0;o.milliseconds=i%1e3,e=m(i/1e3),o.seconds=e%60,t=m(e/60),o.minutes=t%60,n=m(t/60),o.hours=n%24,r+=m(n/24),s=m(ft(r)),r-=m(gt(s)),a+=m(r/30),r%=30,s+=m(a/12),a%=12,o.days=r,o.months=a,o.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*j(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*ft(t),"month"===e?n:n/12;switch(t=this._days+Math.round(gt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 60*24*t+this._milliseconds/6e4;case"second":return 60*60*24*t+this._milliseconds/1e3;case"millisecond":return Math.floor(1e3*60*60*24*t)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||a?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(a?a+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(wt in cn)n(cn,wt)&&_t(wt.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===j(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),It?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=yt),bt}),vt(!0)):vt()}.call(this),define("massrel-js-backbone-2/StatusModel",["require","./backbone","./MediaCollection","lodash","moment"],function(e){var t=e("./backbone"),n=e("./MediaCollection"),i=e("lodash"),r=e("moment"),a=new RegExp("(https?:)?//i\\.embed\\.ly/\\d+/image"),o={minute:r.duration(1,"minute").asMilliseconds(),hour:r.duration(1,"hour").asMilliseconds(),day:r.duration(1,"day").asMilliseconds(),week:r.duration(1,"week").asMilliseconds(),month:r.duration(1,"month").asMilliseconds()};return t.Model.extend({idAttribute:"_id",defaults:function(){return{retweet:!1,formattedDate:"",relativeDateFormat:"display",formattedText:"",klout:null,formattedStory:"",config:{},place:null,media:new n}},constructor:function(e,n){n=n||{},n.parse=!0,t.Model.call(this,e,n),this.generateFormattedDates()},embedlyImageProxyUrl:function(e){return a.test(e)||(e="//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&url="+window.encodeURIComponent(e)),e},parse:function(e){return e.raw=i.cloneDeep(e),e._id=i.uniqueId(),e.klout=this.kloutData(e),e},kloutData:function(e){var t=e.massrel&&e.massrel.klout||null;return t&&t.score&&(t.score_floor=Math.floor(window.parseInt(t.score))),t},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at")))},formattedDates:function(e,t){var n={display:e,"short":e,full:e,timestamp:e},i=r(e,t);return i.isValid()&&(n={display:this.displayDate(i),"short":this.shortDate(i),full:this.fullDate(i),timestamp:this.timestamp(i)}),n},displayDate:function(e){return e.fromNow()},shortDate:function(e){var t,n=r().diff(e),i=r.duration(n);return t=n<o.minute?i.seconds()+"s":n<o.hour?i.minutes()+"m":n<o.day?i.hours()+"h":n<o.week?i.days()+"d":n<o.month?i.weeks()+"w":e.format("M/D/YY")},fullDate:function(e){return e.format("lll")},timestamp:function(e){return e.toISOString()}})}),function(){function e(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var n=a.txt.regexen[t]||"";return"string"!=typeof n&&(n=n.source),n}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function n(e,t,n){var i=String.fromCharCode(t);return n!==t&&(i+="-"+String.fromCharCode(n)),e.push(i),e}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:"string"==typeof e&&e.match(t)&&RegExp["$&"]===e}if("undefined"==typeof a||null===a)var a={};a.txt={},a.txt.regexen={};var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};a.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return o[e]})},a.txt.regexSupplant=e,a.txt.stringSupplant=t,a.txt.addCharsToCharClass=n;var s=String.fromCharCode,l=[s(32),s(133),s(160),s(5760),s(6158),s(8232),s(8233),s(8239),s(8287),s(12288)];n(l,9,13),n(l,8192,8202);var c=[s(65534),s(65279),s(65535)];n(c,8234,8238),a.txt.regexen.spaces_group=e(l.join("")),a.txt.regexen.spaces=e("["+l.join("")+"]"),a.txt.regexen.invalid_chars_group=e(c.join("")),a.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,a.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,a.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var u=[];n(u,192,214),n(u,216,246),n(u,248,255),n(u,256,591),n(u,595,596),n(u,598,599),n(u,601,601),n(u,603,603),n(u,611,611),n(u,616,616),n(u,623,623),n(u,626,626),n(u,649,649),n(u,651,651),n(u,699,699),n(u,768,879),n(u,7680,7935),a.txt.regexen.latinAccentChars=e(u.join(""));var d="A-Za-z-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",h="0-9------------------------------------",p="_";a.txt.regexen.hashSigns=/[#]/,a.txt.regexen.hashtagAlpha=new RegExp("["+d+"]"),a.txt.regexen.hashtagAlphaNumeric=new RegExp("["+d+h+p+"]"),a.txt.regexen.endHashtagMatch=e(/^(?:#{hashSigns}|:\/\/)/),a.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+d+h+p+"])"),a.txt.regexen.validHashtag=e(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),a.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@]|(?:^|[^a-zA-Z0-9_+~.-])(?:rt|RT|rT|Rt):?)/,a.txt.regexen.atSigns=/[@]/,a.txt.regexen.validMentionOrList=e("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),a.txt.regexen.validReply=e(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),a.txt.regexen.endMentionMatch=e(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),a.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@$##{invalid_chars_group}]|^)/),a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,a.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",a.txt.regexen),a.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),a.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),a.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),a.txt.regexen.validGTLD=e(RegExp("(?:(?:abb|abbott|abogado|academy|accenture|accountant|accountants|aco|active|actor|ads|adult|aeg|aero|afl|agency|aig|airforce|airtel|allfinanz|alsace|amsterdam|android|apartments|app|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|auto|autos|axa|azure|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bbc|bbva|bcn|beer|bentley|berlin|best|bet|bharti|bible|bid|bike|bing|bingo|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnl|bnpparibas|boats|bond|boo|boots|boutique|bradesco|bridgestone|broker|brother|brussels|budapest|build|builders|business|buzz|bzh|cab|cafe|cal|camera|camp|cancerresearch|canon|capetown|capital|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|ceb|center|ceo|cern|cfa|cfd|chanel|channel|chat|cheap|chloe|christmas|chrome|church|cisco|citic|city|claims|cleaning|click|clinic|clothing|cloud|club|coach|codes|coffee|college|cologne|com|commbank|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|corsica|country|coupons|courses|credit|creditcard|cricket|crown|crs|cruises|cuisinella|cymru|cyou|dabur|dad|dance|date|dating|datsun|day|dclk|deals|degree|delivery|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dnp|docs|dog|doha|domains|doosan|download|drive|durban|dvag|earth|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|erni|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|faith|family|fan|fans|farm|fashion|feedback|film|finance|financial|firmdale|fish|fishing|fit|fitness|flights|florist|flowers|flsmidth|fly|foo|football|forex|forsale|forum|foundation|frl|frogans|fund|furniture|futbol|fyi|gal|gallery|game|garden|gbiz|gdn|gent|genting|ggee|gift|gifts|gives|giving|glass|gle|global|globo|gmail|gmo|gmx|gold|goldpoint|golf|goo|goog|google|gop|gov|graphics|gratis|green|gripe|group|guge|guide|guitars|guru|hamburg|hangout|haus|healthcare|help|here|hermes|hiphop|hitachi|hiv|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hsbc|ibm|icbc|ice|icu|ifm|iinet|immo|immobilien|industries|infiniti|info|ing|ink|institute|insure|int|international|investments|ipiranga|irish|ist|istanbul|itau|iwc|java|jcb|jetzt|jewelry|jlc|jll|jobs|joburg|jprs|juegos|kaufen|kddi|kim|kitchen|kiwi|koeln|komatsu|krd|kred|kyoto|lacaixa|lancaster|land|lasalle|lat|latrobe|law|lawyer|lds|lease|leclerc|legal|lexus|lgbt|liaison|lidl|life|lighting|limited|limo|link|live|lixil|loan|loans|lol|london|lotte|lotto|love|ltda|lupin|luxe|luxury|madrid|maif|maison|man|management|mango|market|marketing|markets|marriott|mba|media|meet|melbourne|meme|memorial|men|menu|miami|microsoft|mil|mini|mma|mobi|moda|moe|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mtn|mtpc|museum|nadex|nagoya|name|navy|nec|net|netbank|network|neustar|new|news|nexus|ngo|nhk|nico|ninja|nissan|nokia|nra|nrw|ntt|nyc|office|okinawa|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|osaka|otsuka|ovh|page|panerai|paris|partners|parts|party|pet|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pink|pizza|place|play|plumbing|plus|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|racing|realtor|realty|recipes|red|redstone|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rich|ricoh|rio|rip|rocks|rodeo|rsvp|ruhr|run|ryukyu|saarland|sakura|sale|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|saxo|sca|scb|schmidt|scholarships|school|schule|schwarz|science|scor|scot|seat|seek|sener|services|sew|sex|sexy|shiksha|shoes|show|shriram|singles|site|ski|sky|skype|sncf|soccer|social|software|sohu|solar|solutions|sony|soy|space|spiegel|spreadbetting|srl|starhub|statoil|studio|study|style|sucks|supplies|supply|support|surf|surgery|suzuki|swatch|swiss|sydney|systems|taipei|tatamotors|tatar|tattoo|tax|taxi|team|tech|technology|tel|telefonica|temasek|tennis|thd|theater|tickets|tienda|tips|tires|tirol|today|tokyo|tools|top|toray|toshiba|tours|town|toyota|toys|trade|trading|training|travel|trust|tui|ubs|university|uno|uol|vacations|vegas|ventures|vermgensberater|vermgensberatung|versicherung|vet|viajes|video|villas|vin|vision|vista|vistaprint|vlaanderen|vodka|vote|voting|voto|voyage|wales|walter|wang|watch|webcam|website|wed|wedding|weir|whoswho|wien|wiki|williamhill|win|windows|wine|wme|work|works|world|wtc|wtf|xbox|xerox|xin|xperia|xxx|xyz|yachts|yandex|yodobashi|yoga|yokohama|youtube|zip|zone|zuerich|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||onion)(?=[^0-9a-zA-Z@]|$))")),a.txt.regexen.validCCTLD=e(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw||||||||||||||||||||||||||||||||||||||||||||||)(?=[^0-9a-zA-Z@]|$))")),a.txt.regexen.validPunycode=e(/(?:xn--[0-9a-z]+)/),a.txt.regexen.validSpecialCCTLD=e(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),a.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),a.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),a.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/i),a.txt.regexen.validSpecialShortDomain=e(/^#{validDomainName}#{validSpecialCCTLD}$/i),a.txt.regexen.validPortNumber=e(/[0-9]+/),a.txt.regexen.validGeneralUrlPathChars=e(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),a.txt.regexen.validUrlBalancedParens=e("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),a.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),a.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),a.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,a.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,a.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),a.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,a.txt.regexen.urlHasProtocol=/^https?:\/\//i,a.txt.regexen.urlHasHttps=/^https:\/\//i,a.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,a.txt.regexen.validCashtag=e("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),a.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,a.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,a.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,a.txt.regexen.validateUrlPchar=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),a.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,a.txt.regexen.validateUrlUserinfo=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),a.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,a.txt.regexen.validateUrlIpv4=e(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),a.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,a.txt.regexen.validateUrlIp=e("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),a.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,a.txt.regexen.validateUrlDomain=e(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),a.txt.regexen.validateUrlHost=e("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),a.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,a.txt.regexen.validateUrlUnicodeDomain=e(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),a.txt.regexen.validateUrlUnicodeHost=e("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),a.txt.regexen.validateUrlPort=/[0-9]{1,5}/,a.txt.regexen.validateUrlUnicodeAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),a.txt.regexen.validateUrlAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),a.txt.regexen.validateUrlPath=e(/(\/#{validateUrlPchar}*)*/i),a.txt.regexen.validateUrlQuery=e(/(#{validateUrlPchar}|\/|\?)*/i),a.txt.regexen.validateUrlFragment=e(/(#{validateUrlPchar}|\/|\?)*/i),a.txt.regexen.validateUrlUnencoded=e("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");
	var m="tweet-url list-slug",f="tweet-url username",g="tweet-url hashtag",_="tweet-url cashtag",v={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},b={disabled:!0,readonly:!0,multiple:!0,checked:!0};a.txt.tagAttrs=function(e){var t="";for(var n in e){var i=e[n];b[n]&&(i=i?n:null),null!=i&&(t+=" "+a.txt.htmlEscape(n)+'="'+a.txt.htmlEscape(i.toString())+'"')}return t},a.txt.linkToText=function(e,n,i,r){r.suppressNoFollow||(i.rel="nofollow"),r.linkAttributeBlock&&r.linkAttributeBlock(e,i),r.linkTextBlock&&(n=r.linkTextBlock(e,n));var o={text:n,attr:a.txt.tagAttrs(i)};return t("<a#{attr}>#{text}</a>",o)},a.txt.linkToTextWithSymbol=function(e,t,n,i,r){var o=r.symbolTag?"<"+r.symbolTag+">"+t+"</"+r.symbolTag+">":t;n=a.txt.htmlEscape(n);var s=r.textWithSymbolTag?"<"+r.textWithSymbolTag+">"+n+"</"+r.textWithSymbolTag+">":n;return r.usernameIncludeSymbol||!t.match(a.txt.regexen.atSigns)?a.txt.linkToText(e,o+s,i,r):o+a.txt.linkToText(e,s,i,r)},a.txt.linkToHashtag=function(e,t,n){var r=t.substring(e.indices[0],e.indices[0]+1),o=a.txt.htmlEscape(e.hashtag),s=i(n.htmlAttrs||{});return s.href=n.hashtagUrlBase+o,s.title="#"+o,s["class"]=n.hashtagClass,o.charAt(0).match(a.txt.regexen.rtl_chars)&&(s["class"]+=" rtl"),n.targetBlank&&(s.target="_blank"),a.txt.linkToTextWithSymbol(e,r,o,s,n)},a.txt.linkToCashtag=function(e,t,n){var r=a.txt.htmlEscape(e.cashtag),o=i(n.htmlAttrs||{});return o.href=n.cashtagUrlBase+r,o.title="$"+r,o["class"]=n.cashtagClass,n.targetBlank&&(o.target="_blank"),a.txt.linkToTextWithSymbol(e,"$",r,o,n)},a.txt.linkToMentionAndList=function(e,t,n){var r=t.substring(e.indices[0],e.indices[0]+1),o=a.txt.htmlEscape(e.screenName),s=a.txt.htmlEscape(e.listSlug),l=e.listSlug&&!n.suppressLists,c=i(n.htmlAttrs||{});return c["class"]=l?n.listClass:n.usernameClass,c.href=l?n.listUrlBase+o+s:n.usernameUrlBase+o,l||n.suppressDataScreenName||(c["data-screen-name"]=o),n.targetBlank&&(c.target="_blank"),a.txt.linkToTextWithSymbol(e,r,l?o+s:o,c,n)},a.txt.linkToUrl=function(e,t,n){var r=e.url,o=r,s=a.txt.htmlEscape(o),l=n.urlEntities&&n.urlEntities[r]||e;l.display_url&&(s=a.txt.linkTextWithEntity(l,n));var c=i(n.htmlAttrs||{});return r.match(a.txt.regexen.urlHasProtocol)||(r="http://"+r),c.href=r,n.targetBlank&&(c.target="_blank"),n.urlClass&&(c["class"]=n.urlClass),n.urlTarget&&(c.target=n.urlTarget),!n.title&&l.display_url&&(c.title=l.expanded_url),a.txt.linkToText(e,s,c,n)},a.txt.linkTextWithEntity=function(e,n){var i=e.display_url,r=e.expanded_url,o=i.replace(//g,"");if(-1!=r.indexOf(o)){var s=r.indexOf(o),l={displayUrlSansEllipses:o,beforeDisplayUrl:r.substr(0,s),afterDisplayUrl:r.substr(s+o.length),precedingEllipsis:i.match(/^/)?"":"",followingEllipsis:i.match(/$/)?"":""};for(var c in l)l.hasOwnProperty(c)&&(l[c]=a.txt.htmlEscape(l[c]));return l.invisible=n.invisibleTagAttrs,t("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",l)}return i},a.txt.autoLinkEntities=function(e,t,n){n=i(n||{}),n.hashtagClass=n.hashtagClass||g,n.hashtagUrlBase=n.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",n.cashtagClass=n.cashtagClass||_,n.cashtagUrlBase=n.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",n.listClass=n.listClass||m,n.usernameClass=n.usernameClass||f,n.usernameUrlBase=n.usernameUrlBase||"https://twitter.com/",n.listUrlBase=n.listUrlBase||"https://twitter.com/",n.htmlAttrs=a.txt.extractHtmlAttrsFromOptions(n),n.invisibleTagAttrs=n.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var r,o,s;if(n.urlEntities){for(r={},o=0,s=n.urlEntities.length;s>o;o++)r[n.urlEntities[o].url]=n.urlEntities[o];n.urlEntities=r}var l="",c=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var u=n.htmlEscapeNonEntities?a.txt.htmlEscape:function(e){return e},o=0;o<t.length;o++){var d=t[o];l+=u(e.substring(c,d.indices[0])),d.url?l+=a.txt.linkToUrl(d,e,n):d.hashtag?l+=a.txt.linkToHashtag(d,e,n):d.screenName?l+=a.txt.linkToMentionAndList(d,e,n):d.cashtag&&(l+=a.txt.linkToCashtag(d,e,n)),c=d.indices[1]}return l+=u(e.substring(c,e.length))},a.txt.autoLinkWithJSON=function(e,t,n){if(t.user_mentions)for(var i=0;i<t.user_mentions.length;i++)t.user_mentions[i].screenName=t.user_mentions[i].screen_name;if(t.hashtags)for(var i=0;i<t.hashtags.length;i++)t.hashtags[i].hashtag=t.hashtags[i].text;if(t.symbols)for(var i=0;i<t.symbols.length;i++)t.symbols[i].cashtag=t.symbols[i].text;var r=[];for(var o in t)r=r.concat(t[o]);return a.txt.modifyIndicesFromUnicodeToUTF16(e,r),a.txt.autoLinkEntities(e,r,n)},a.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var i=e[n];v[n]||(b[n]&&(i=i?n:null),null!=i&&(t[n]=i))}return t},a.txt.autoLink=function(e,t){var n=a.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(e,n,t)},a.txt.autoLinkUsernamesOrLists=function(e,t){var n=a.txt.extractMentionsOrListsWithIndices(e);return a.txt.autoLinkEntities(e,n,t)},a.txt.autoLinkHashtags=function(e,t){var n=a.txt.extractHashtagsWithIndices(e);return a.txt.autoLinkEntities(e,n,t)},a.txt.autoLinkCashtags=function(e,t){var n=a.txt.extractCashtagsWithIndices(e);return a.txt.autoLinkEntities(e,n,t)},a.txt.autoLinkUrlsCustom=function(e,t){var n=a.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return a.txt.autoLinkEntities(e,n,t)},a.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var t=e[0],n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},a.txt.extractEntitiesWithIndices=function(e,t){var n=a.txt.extractUrlsWithIndices(e,t).concat(a.txt.extractMentionsOrListsWithIndices(e)).concat(a.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(a.txt.extractCashtagsWithIndices(e));return 0==n.length?[]:(a.txt.removeOverlappingEntities(n),n)},a.txt.extractMentions=function(e){for(var t=[],n=a.txt.extractMentionsWithIndices(e),i=0;i<n.length;i++){var r=n[i].screenName;t.push(r)}return t},a.txt.extractMentionsWithIndices=function(e){for(var t,n=[],i=a.txt.extractMentionsOrListsWithIndices(e),r=0;r<i.length;r++)t=i[r],""==t.listSlug&&n.push({screenName:t.screenName,indices:t.indices});return n},a.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(a.txt.regexen.atSigns))return[];var t=[];return e.replace(a.txt.regexen.validMentionOrList,function(e,n,i,r,o,s,l){var c=l.slice(s+e.length);if(!c.match(a.txt.regexen.endMentionMatch)){o=o||"";var u=s+n.length,d=u+r.length+o.length+1;t.push({screenName:r,listSlug:o,indices:[u,d]})}}),t},a.txt.extractReplies=function(e){if(!e)return null;var t=e.match(a.txt.regexen.validReply);return!t||RegExp.rightContext.match(a.txt.regexen.endMentionMatch)?null:t[1]},a.txt.extractUrls=function(e,t){for(var n=[],i=a.txt.extractUrlsWithIndices(e,t),r=0;r<i.length;r++)n.push(i[r].url);return n},a.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var n=[];a.txt.regexen.extractUrl.exec(e);){var i=RegExp.$2,r=RegExp.$3,o=RegExp.$4,s=RegExp.$5,l=RegExp.$7,c=a.txt.regexen.extractUrl.lastIndex,u=c-r.length;if(o)r.match(a.txt.regexen.validTcoUrl)&&(r=RegExp.lastMatch,c=u+r.length),n.push({url:r,indices:[u,c]});else{if(!t.extractUrlsWithoutProtocol||i.match(a.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var d=null,h=0;if(s.replace(a.txt.regexen.validAsciiDomain,function(e){var t=s.indexOf(e,h);h=t+e.length,d={url:e,indices:[u+t,u+h]},(l||e.match(a.txt.regexen.validSpecialShortDomain)||!e.match(a.txt.regexen.invalidShortDomain))&&n.push(d)}),null==d)continue;l&&(d.url=r.replace(s,d.url),d.indices[1]=c)}}return n},a.txt.extractHashtags=function(e){for(var t=[],n=a.txt.extractHashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].hashtag);return t},a.txt.extractHashtagsWithIndices=function(e,t){if(t||(t={checkUrlOverlap:!0}),!e||!e.match(a.txt.regexen.hashSigns))return[];var n=[];if(e.replace(a.txt.regexen.validHashtag,function(e,t,i,r,o,s){var l=s.slice(o+e.length);if(!l.match(a.txt.regexen.endHashtagMatch)){var c=o+t.length,u=c+r.length+1;n.push({hashtag:r,indices:[c,u]})}}),t.checkUrlOverlap){var i=a.txt.extractUrlsWithIndices(e);if(i.length>0){var r=n.concat(i);a.txt.removeOverlappingEntities(r),n=[];for(var o=0;o<r.length;o++)r[o].hashtag&&n.push(r[o])}}return n},a.txt.extractCashtags=function(e){for(var t=[],n=a.txt.extractCashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].cashtag);return t},a.txt.extractCashtagsWithIndices=function(e){if(!e||-1==e.indexOf("$"))return[];var t=[];return e.replace(a.txt.regexen.validCashtag,function(e,n,i,r,a){var o=a+n.length,s=o+r.length+1;t.push({cashtag:r,indices:[o,s]})}),t},a.txt.modifyIndicesFromUnicodeToUTF16=function(e,t){a.txt.convertUnicodeIndices(e,t,!1)},a.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){a.txt.convertUnicodeIndices(e,t,!0)},a.txt.getUnicodeTextLength=function(e){return e.replace(a.txt.regexen.non_bmp_code_pairs," ").length},a.txt.convertUnicodeIndices=function(e,t,n){if(0!=t.length){var i=0,r=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var a=0,o=t[0];i<e.length;){if(o.indices[0]==(n?i:r)){var s=o.indices[1]-o.indices[0];if(o.indices[0]=n?r:i,o.indices[1]=o.indices[0]+s,a++,a==t.length)break;o=t[a]}var l=e.charCodeAt(i);l>=55296&&56319>=l&&i<e.length-1&&(l=e.charCodeAt(i+1),l>=56320&&57343>=l&&i++),r++,i++}}},a.txt.splitTags=function(e){for(var t,n,i=e.split("<"),r=[],a=0;a<i.length;a+=1)if(n=i[a]){t=n.split(">");for(var o=0;o<t.length;o+=1)r.push(t[o])}else r.push("");return r},a.txt.hitHighlight=function(e,t,n){var i="em";if(t=t||[],n=n||{},0===t.length)return e;var r,o,s,l,c,u,d,h=n.tag||i,p=["<"+h+">","</"+h+">"],m=a.txt.splitTags(e),f="",g=0,_=m[0],v=0,b=0,y=!1,w=_,k=[];for(r=0;r<t.length;r+=1)for(o=0;o<t[r].length;o+=1)k.push(t[r][o]);for(s=0;s<k.length;s+=1){for(l=k[s],c=p[s%2],u=!1;null!=_&&l>=v+_.length;)f+=w.slice(b),y&&l===v+w.length&&(f+=c,u=!0),m[g+1]&&(f+="<"+m[g+1]+">"),v+=w.length,b=0,g+=2,_=m[g],w=_,y=!1;u||null==_?u||(u=!0,f+=c):(d=l-v,f+=w.slice(b,d)+c,b=d,y=0===s%2?!0:!1)}if(null!=_)for(b<w.length&&(f+=w.slice(b)),s=g+1;s<m.length;s+=1)f+=0===s%2?m[s]:"<"+m[s]+">";return f};var y=140,w=[s(65534),s(65279),s(65535),s(8234),s(8235),s(8236),s(8237),s(8238)];a.txt.getTweetLength=function(e,t){t||(t={short_url_length:23,short_url_length_https:23});var n=a.txt.getUnicodeTextLength(e),i=a.txt.extractUrlsWithIndices(e);a.txt.modifyIndicesFromUTF16ToUnicode(e,i);for(var r=0;r<i.length;r++)n+=i[r].indices[0]-i[r].indices[1],n+=i[r].url.toLowerCase().match(a.txt.regexen.urlHasHttps)?t.short_url_length_https:t.short_url_length;return n},a.txt.isInvalidTweet=function(e){return e?a.txt.getTweetLength(e)>y?"too_long":a.txt.hasInvalidCharacters(e)?"invalid_characters":!1:"empty"},a.txt.hasInvalidCharacters=function(e){for(var t=0;t<w.length;t++)if(e.indexOf(w[t])>=0)return!0;return!1},a.txt.isValidTweetText=function(e){return!a.txt.isInvalidTweet(e)},a.txt.isValidUsername=function(e){if(!e)return!1;var t=a.txt.extractMentions(e);return 1===t.length&&t[0]===e.slice(1)};var k=e(/^#{validMentionOrList}$/);if(a.txt.isValidList=function(e){var t=e.match(k);return!(!t||""!=t[1]||!t[4])},a.txt.isValidHashtag=function(e){if(!e)return!1;var t=a.txt.extractHashtags(e);return 1===t.length&&t[0]===e.slice(1)},a.txt.isValidUrl=function(e,t,n){if(null==t&&(t=!0),null==n&&(n=!0),!e)return!1;var i=e.match(a.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==e)return!1;var o=i[1],s=i[2],l=i[3],c=i[4],u=i[5];return(!n||r(o,a.txt.regexen.validateUrlScheme)&&o.match(/^https?$/i))&&r(l,a.txt.regexen.validateUrlPath)&&r(c,a.txt.regexen.validateUrlQuery,!0)&&r(u,a.txt.regexen.validateUrlFragment,!0)?t&&r(s,a.txt.regexen.validateUrlUnicodeAuthority)||!t&&r(s,a.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=a.txt),"function"==typeof define&&define.amd&&define("twitter-text/twitter-text",[],a.txt),"undefined"!=typeof window)if(window.twttr)for(var x in a)window.twttr[x]=a[x];else window.twttr=a}(),define("twitter-text",["twitter-text/twitter-text"],function(e){return e}),define("massrel-js-backbone-2/TwitterStatusModel",["require","massrel-js","./StatusModel","twitter-text","lodash"],function(e){var t=e("massrel-js"),n=e("./StatusModel"),i=e("twitter-text"),r=e("lodash"),a={thumb:"_normal",small:"_normal",medium:"_bigger",large:"_reasonably_small",huge:""},o=["network","sourceNetwork","sourceName","massrel"],s=["original_referer"],l={video:!0,animated_gif:!0},c="ddd MMM DD HH:mm:ss ZZ YYYY";return n.extend({defaults:r.extend(r.result(n.prototype,"defaults"),{original_referer:t.intents.original_referer,relativeDateFormat:"short"}),parse:function(e){if(e=n.prototype.parse.apply(this,arguments),e.retweeted_status){var t=e;e=e.retweeted_status,e.original_status=t,e.raw=t.raw,delete e.original_status.retweeted_status,delete e.original_status.raw,e.retweet=!0,e.retweeted_by_user=e.original_status.user,r.extend(e,r.pick(e.original_status,o)),e.klout=this.kloutData(e)}e.extended_entities&&e.extended_entities.media&&e.extended_entities.media.length>0&&r.each(e.entities.media,function(t,n){var i=r.find(e.extended_entities.media,{id:t.id});i&&l[i.type]===!0&&(e.entities.media[n]=i)});var a=[];e.entities&&(e.entities.urls&&e.entities.urls.length>0&&(a=a.concat(e.entities.urls)),e.entities.media&&e.entities.media.length>0&&(a=a.concat(e.entities.media))),e.formattedText=i.autoLink(e.text,{usernameIncludeSymbol:!0,urlEntities:a});var s=e.geo||e.geo_hint;return s&&(e.coordinates=s.coordinates),e},constructor:function(){n.apply(this,arguments),this.generateIntentUrls(),this.generateAvatarUrl(),this.on("change:original_referer",r.bind(this.generateIntentUrls,this)),this.on("change:avatar_resolution",r.bind(this.generateAvatarUrl,this))},generateAvatarUrl:function(){var e=this.get("avatar_resolution"),t=this.get("user"),n=a[e];if(n){var i=t.profile_image_url_https.replace("_normal",n);t.profile_image_url_https=i}},generateIntentUrls:function(){var e=r.pick(this.toJSON(),s),n=this.get("id_str");this.set("replyUrl",t.intents.reply(n,e)),this.set("retweetUrl",t.intents.retweet(n,e)),this.set("favUrl",t.intents.favorite(n,e))},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at"),c))}})}),define("massrel-js-backbone-2/FacebookStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),i=e("lodash");return t.extend({parse:function(e){e=t.prototype.parse.apply(this,arguments);var n="https://www.facebook.com/",r=e.facebook_id.split("_"),a=e.type;return i.contains(["photo","video","link","post"],a)?n+=[r[0],"posts",r[1]].join("/"):"comment"===e.kind?2===r.length?n+=r[0]+"?comment_id="+r[1]:(n+=[r[0],"posts",r[1]].join("/"),r[2]&&(n+="?comment_id="+r[2])):n+=e.facebook_id,e.permalink=n,e.action_available={comment:!0,share:!1,like:!1},"comment"===e.kind&&(e.action_available.comment=!1),e.share_text&&e.story&&(e.formattedStory=this.autoLink(e.story)),e.originalStatus=i.extend({},e),"string"==typeof e.originalStatus.id&&(e.originalStatus.id=e.originalStatus.id.replace("facebook:","")),(e.message||e.name)&&(e.formattedText=this.autoLink(e.message||e.name)),e.hide_app_cards&&e.fbapp_id&&e.application&&e.fbapp_id===e.application.id&&(e.mediaHtml=""),e.author?e.action_available.like=e.author.is_page>0?!0:!1:e.from&&e.from.broadcast_name&&(e.author={name:e.from.broadcast_name,is_page:!0},e.action_available.like=!0),e},autoLink:function(e){var t=n.extractUrlsWithIndices(e).concat(n.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}));return n.removeOverlappingEntities(t),n.autoLinkEntities(e,t,{hashtagClass:"facebook-hashtag",urlClass:"facebook-url",hashtagUrlBase:"https://www.facebook.com/hashtag/",targetBlank:!0})},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time")))}})}),define("massrel-js-backbone-2/InstagramStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){if(e=t.prototype.parse.apply(this,arguments),e.user.profile_picture&&(e.user.profile_picture=this.embedlyImageProxyUrl(e.user.profile_picture),e.caption&&e.caption.from.profile_picture&&(e.caption.from.profile_picture=this.embedlyImageProxyUrl(e.caption.from.profile_picture))),e.caption){var i=e.caption.text,r=String.fromCharCode(133)+"#",a=this.getHashtagRuns(i);i=_.reduce(a,function(e,t){var n=t.replace(/#/g,r).slice(1);return e.replace(t,n)},i);var o=n.extractUrlsWithIndices(i),s=n.extractMentionsWithIndices(i),l=n.extractHashtagsWithIndices(i,{checkUrlOverlap:!1}),c=o.concat(l).concat(s);n.removeOverlappingEntities(c);var u={hashtagUrlBase:"//instagram.com/explore/tags/",usernameUrlBase:"//instagram.com/"},d=n.autoLinkEntities(i,c,u);e.caption.text=d}return e.location&&_.isNumber(e.location.latitude)&&_.isNumber(e.location.longitude)&&(e.coordinates=[e.location.latitude,e.location.longitude]),e.place=e.location,delete e.location,e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time"),"X"))},getHashtagRuns:function(e){for(var t=/(?:#|^|\s)((?:#[^#\s]+){2,})(?:#|$|\s)/gi,n=[],i=t.exec(e);i;)t.lastIndex=i.index+1,n.push(i[1]),i=t.exec(e);return _.sortBy(n,"length").reverse()}})}),define("massrel-js-backbone-2/GoogleStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.title&&(e.title=n.autoLinkUrlsCustom(e.title)),e.place=e.location,delete e.location,e.formattedText=e.title,e.object&&e.object.content&&(e.formattedText=e.object.content),e.url||(e.url=""),e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("published")))}})}),define("massrel-js-backbone-2/GetglueStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),i=e("lodash"),r={thumb:"tiny_",small:"tiny_",medium:"",large:"large_",huge:"large_"},a=/\/[a-z_]*tile\./;return t.extend({defaults:i.extend(i.result(t.prototype,"defaults"),{relativeDateFormat:"short"}),parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.actor&&e.actor.image&&(e.actor.image=this.embedlyImageProxyUrl(e.actor.image)),e.canonical_link=e.link,i.isUndefined(e.inReplyTo)||(e.canonical_link=e.inReplyTo.link),e.body=n.autoLinkUrlsCustom(e.body),e},initialize:function(){t.prototype.initialize.apply(this,arguments),this.generateAvatarUrl()},generateAvatarUrl:function(){var e=this.get("actor"),t=this.get("avatar_resolution"),n=r[t];if(n){var i=e.image.replace(a,"/"+n+"tile.");e.image=i}},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("publishTime")))}})}),define("massrel-js-backbone-2/RssStatusModel",["./StatusModel","twitter-text"],function(e,t){return e.extend({parse:function(n){return n=e.prototype.parse.apply(this,arguments),n.description&&(n.raw_description=n.description,n.description=t.autoLinkUrlsCustom(n.description)),n},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("pub_date")))}})}),define("massrel-js-backbone-2/YoutubeStatusModel",["./StatusModel","twitter-text","./MediaCollection","./MediaModel","lodash","moment"],function(e,t,n,i,r,a){return e.extend({defaults:r.extend(r.result(e.prototype,"defaults"),{relativeDurationFormat:"display",formattedDuration:"",relativeDateFormat:"short"}),initialize:function(){e.prototype.initialize.apply(this,arguments),this.on("change:relativeDurationFormat",r.bind(this.generateFormattedDurations,this)),this.generateFormattedDurations()},parse:function(t){return t=e.prototype.parse.apply(this,arguments),t.title=t.snippet.title,t.description=t.snippet.description,t.link="//youtu.be/"+t.youtube_video_id,t.channelTitle=t.snippet.channelTitle,t},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("snippet").publishedAt))},generateFormattedDurations:function(){var e=this.computeDuration(this.get("contentDetails").duration),t=this.get("relativeDurationFormat");r.isFunction(t)?this.set("formattedDuration",t(e)):this[t+"Duration"]&&this.set("formattedDuration",this[t+"Duration"](e))},computeDuration:function(e){var t=a.duration(e);return{hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),totalSeconds:t.asSeconds()}},displayDuration:function(e){function t(e){return 10>e?"0"+e:e}var n=":"+t(e.seconds);return n=e.hours?e.hours+":"+t(e.minutes)+n:e.minutes+n},secondsDuration:function(e){return e.totalSeconds}})}),define("massrel-js-backbone-2/statusModelFactory",["./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./InstagramStatusModel","./GoogleStatusModel","./GetglueStatusModel","./RssStatusModel","./YoutubeStatusModel"],function(e,t,n,i,r,a,o,s){var l=function(t,n,i){var r;return l.detectSource(t),"undefined"==typeof i&&(i=l.constructors),r=void 0!==i[t.sourceName]?i[t.sourceName]:e,new r(t,n)};return l.constructors={twitter:t,facebook:n,instagram:i,google:r,getglue:a,rss:o,youtube:s},l.detectSource=function(e){return e.sourceNetwork={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,youtube:!1,message:!1},"undefined"!=typeof e.sourceNetwork[e.network]&&(e.sourceNetwork[e.network]=!0,e.sourceName=e.network),"google_plus"===e.network&&(e.sourceNetwork.google=!0,e.sourceName="google"),"youtube"===e.network&&(e.sourceNetwork.youtube=!0,e.sourceName="youtube"),"massrelevance"===e.network&&(e.sourceNetwork.message=!0,e.sourceName="message"),e},l}),define("massrel-js-backbone-2/mediaCollectionFactory",["q","./MediaCollection","media-meta"],function(e,t,n){var i=function(i,r){var a=e.defer(),o=n.promise(i.toJSON(),r);return o.done(function(e){a.resolve(new t(e))},function(){a.reject()}),a.promise};return i}),define("massrel-js-backbone-2/StreamPoller",["require","lodash","q","./backbone","./statusModelFactory","./mediaCollectionFactory","massrel-js"],function(e){var t=e("lodash"),n=e("q"),i=e("./backbone"),r=e("./statusModelFactory"),a=e("./mediaCollectionFactory"),o=e("massrel-js"),s="https"===o.protocol;return i.Model.extend({defaults:{embed_media:!1,avatar_resolution:"small",total:0,media_config:{secure:s,autoplay_video:!1,loop_video:!1}},initialize:function(){var e=this;e.filters=[],e.asyncFilters=[],e.queue=new i.Collection,e.moreQueue=new i.Collection;var n=e.toJSON();e.stream=new o.Stream(n.stream_name),e.poller=e.stream.poller(n),e.poller.data(function(t){var n=e.get("total")+t.length;e.set("total",n),0===n&&e.trigger("no-data"),0===t.length&&e.trigger("no-new-data")}),e.poller.batch(t.bind(e.handleBatch,e))},start:function(){var e=this;return this.get("stream_name")&&e.poller.start(),e},handleBatch:function(e){var t=this;t.createModels(e).done(function(e){t.queue.add(e,{at:0}),t.trigger("loaded-batch",e.length)})},createModels:function(e){var i=this,o=n.defer(),s=i.get("embed_media"),l=i.get("avatar_resolution"),c=i.get("media_config"),u=[],d=[];if(t.each(e,function(e){if(e.in_reply_to){var t=r(e.in_reply_to);u.push(t)}var n=r(e);u.push(n),e.in_reply_to&&(t.set("reply",n),n.set("in_reply_to",t))}),t.each(u,function(e){if(l&&e.set("avatar_resolution",l),s){var t=a(e,c);t.then(function(t){e.set("media",t)}).fail(function(){}),d.push(t)}}),s)n.allSettled(d).done(function(){var e=i.applyFilters(u);i.applyAsyncFilters(e).then(function(e){o.resolve(e)})});else{var h=i.applyFilters(u);i.applyAsyncFilters(h).then(function(e){o.resolve(e)})}return o.promise},stop:function(){var e=this;return e.poller.stop(),e},filter:function(e){var t=this;return t.filters.push(e),t.queue.remove(t.queue.reject(e)),t.moreQueue.remove(t.moreQueue.reject(e)),t},asyncFilter:function(e){var n=this;n.asyncFilters.push(e);var i=t.clone(n.queue.models),r=t.clone(n.moreQueue.models);return n.applyAsyncFilters(n.queue.models).then(function(e){var r=t.difference(i,e);n.queue.remove(r)}),n.applyAsyncFilters(n.moreQueue.models).then(function(e){var i=t.difference(r,e);n.moreQueue.remove(i)}),n},applyFilters:function(e){var n=this;return t.each(n.filters,function(n){e=t.filter(e,n)}),e},applyAsyncFilters:function(e){var i=n.defer(),r=function(e){i.resolve(e)};if(this.asyncFilters.length){var a=n(e);t.each(this.asyncFilters,function(e){a=a.then(e)}),a.then(r)}else i.resolve(e);return i.promise},more:function(){var e=this;return e.trigger("loading-more"),e.poller.more(t.bind(e.loadedMore,e)),e},loadedMore:function(e){var t=this;0===e.length?t.trigger("end-of-data"):t.createModels(e).done(function(e){t.moreQueue.add(e),t.trigger("loaded-more",e.length)})}})}),define("massrel-js-backbone-2/Filters",["require","./backbone","q","jquery","lodash"],function(e){function t(e){var t=o("head"),n=a.defer(),i=o("<img/>");return i.on("load",function(){i.remove(),n.resolve()}).on("error",function(){i.remove(),n.reject()}),t.append(i),i.attr("src",e),n.promise}function n(e,n){var i=[],r=[],o=a.defer();return s.each(e,function(e){var o=a.defer();i.push(o.promise);var s=e.get("media");if(s&&s.length>0){var l=s.at(0),c=l.get("photo_urls"),u=l.get("size"),d=[];if(!c[u])return o.resolve();d.push(t(c[u].url)),a.all(d).then(function(){r.push(e),o.resolve()},function(){o.resolve()})}else n&&n.includeText&&r.push(e),o.resolve()}),a.allSettled(i).then(function(){o.resolve(s.intersection(e,r))}),o.promise}function i(e){return n(e,{includeText:!0})}function r(e){return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.get("formattedText")&&e.get("formattedText").trim().length>0?!0:"instagram"===e.get("network")&&e.get("caption")&&e.get("caption").text&&e.get("caption").text.trim().length>0?!0:"rss"===e.get("network")&&(e.get("title")&&e.get("title").trim().length>0||e.get("description")&&e.get("description").trim().length>0)?!0:!1}e("./backbone");var a=e("q"),o=e("jquery"),s=e("lodash");return{sync:{hasTextStatus:r},async:{hasValidImages:n,hasValidImagesOrText:i}}}),define("massrel-js-backbone-2/ComparePoller",["./backbone","massrel-js"],function(e,t){return e.Model.extend({defaults:function(){return{streams:[],frequency:20}},initialize:function(){var e=this,n=e.toJSON();e.compare=new t.Compare(n.streams),e.poller=e.compare.poller(n)},start:function(){var e=this;this.get("streams")&&this.get("streams").length>0&&(e.set("loading",!0),e.poller.data(function(t){e.set("data",t),e.set("loading",!1)}),e.poller.start())},stop:function(){this.poller.stop()}})}),define("massrel-js-backbone-2/MetaPoller",["require","./backbone","massrel-js"],function(e){var t=e("./backbone"),n=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,disregard:"",frequency:20,loading:!1,activity:{},count:{},networks:{}}},initialize:function(){var e=this,t=e.toJSON();e.stream=new n.Stream(t.stream_name),e.poller=e.stream.metaPoller(t)},start:function(){var e=this;this.get("stream_name")&&(e.set("loading",!0),e.poller.data(function(t){e.set(t),e.set("loading",!1)}),e.poller.start())},stop:function(){var e=this;e.poller.stop()}})}),define("massrel-js-backbone-2/TopThingsPoller",["require","./backbone","massrel-js","lodash"],function(e){var t=e("./backbone"),n=e("massrel-js"),i=e("lodash");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,frequency:20,resolution:"1h",start:"-1h",finish:"",thing:"",limit:50,loading:!1,data:{}}},start:function(){if(this.stop(),this.get("stream_name")){var e=i.pick(this.toJSON(),["thing","resolution","start","finish","limit","stream_name"]);this.stream=new n.Stream(e.stream_name),this.poller=this.stream.topThingsPoller(e),this.set("loading",!0),this.poller.data(i.bind(function(e){this.set("data",e),this.set("loading",!1)},this)),this.poller.start()}},stop:function(){this.poller&&this.poller.stop()}})}),define("massrel-js-backbone-2/main",["require","./StreamPoller","./Filters","./ComparePoller","./MetaPoller","./TopThingsPoller","./statusModelFactory","./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./GoogleStatusModel","./GetglueStatusModel","./InstagramStatusModel","./RssStatusModel","./mediaCollectionFactory","./MediaCollection","./MediaModel"],function(e){var t=e("./StreamPoller"),n=e("./Filters"),i=e("./ComparePoller"),r=e("./MetaPoller"),a=e("./TopThingsPoller"),o=e("./statusModelFactory"),s=e("./StatusModel"),l=e("./TwitterStatusModel"),c=e("./FacebookStatusModel"),u=e("./GoogleStatusModel"),d=e("./GetglueStatusModel"),h=e("./InstagramStatusModel"),p=e("./RssStatusModel"),m=e("./mediaCollectionFactory"),f=e("./MediaCollection"),g=e("./MediaModel");return{StreamPoller:t,ComparePoller:i,MetaPoller:r,TopThingsPoller:a,statusModelFactory:o,StatusModel:s,TwitterStatusModel:l,FacebookStatusModel:c,GoogleStatusModel:u,GetglueStatusModel:d,InstagramStatusModel:h,RssStatusModel:p,mediaCollectionFactory:m,MediaCollection:f,MediaModel:g,Filters:n}}),define("massrel-js-backbone-2",["massrel-js-backbone-2/main"],function(e){return e}),define("tmpl!media",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)type.photo&&(__p+='\n  <a href="'+__e(link)+'" target="_blank">\n    <img src="'+__e(photo_url)+'" />\n  </a>\n'),__p+="\n\n",type.video&&(__p+="\n  ",embed_url?__p+='\n    <iframe src="'+__e(embed_url)+'" seamless></iframe>\n  ':embed_html&&(__p+='\n    <div class="video-embed-wrapper"\n      ',0!==height*width&&(__p+='\n        style="padding-top: '+__e(100*(height/width))+'%"\n      '),__p+=">\n      "+(null==(__t=embed_html)?"":__t)+"\n    </div>\n  "),__p+="\n"),__p+="\n\n",type.link&&(__p+="\n"),__p+="\n";return __p},metadata:{customizable:!0},name:"media"})}),define("lib/views/MediaView",["require","lodash","lib/views/BaseView","tmpl!media"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!media");return n.extend({template:i,className:"media",initialize:function(){t.each(this.model.get("type"),function(e,t){this.$el.toggleClass("embed-type-"+t,e)},this)}})}),define("tmpl!klout",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="klout">\n  ',__p+=profile_url?'\n  <a href="'+__e(profile_url)+'" class="klout-score" data-score="'+__e(score)+'" title="Klout Score is '+__e(score_floor)+'">'+__e(score_floor)+"</a>\n  ":'\n  <span class="klout-score" data-score="'+__e(score)+'" title="Klout Score is '+__e(score_floor)+'">'+__e(score_floor)+"</span>\n  ",__p+="\n</div>\n";return __p},metadata:{},name:"klout"})}),define("lib/views/StatusView",["require","lib/views/BaseView","lib/views/MediaView","lodash","tmpl!klout","moment","lib/analytics/main"],function(e){var t=e("lib/views/BaseView"),n=e("lib/views/MediaView"),i=e("lodash"),r=e("tmpl!klout"),a=e("moment"),o=e("lib/analytics/main");return t.extend({className:"status",type:"status",$timestamp:null,subviews:{media:n},initialize:function(){t.prototype.initialize.apply(this,arguments);var e=this.dispatcher();e&&this.listenTo(e,"update-relative-dates",this.updateRelativeDates),this.listenTo(this.model,"change:relativeDateFormat",this.updateRelativeDates)},render:function(){var e=this.model&&this.model.get("klout");
	return e&&this.model.set("kloutHtml",r(e)),t.prototype.render.apply(this,arguments),e&&this.$el.addClass("has-klout"),this.$timestamp=this.$el.find(".timestamp"),this.updateRelativeDates(),this.trackImpression(),this},trackImpression:function(){if(this.model&&this.model.attributes){var e=this.model.get("network"),t=this.model.get("entity_id");o.trackImpression({network:e,entityId:t})}},updateRelativeDates:function(){if(this.model.generateFormattedDates(),this.$timestamp&&this.$timestamp.length>0){var e,t=this.model.get("formattedDate"),n=this.model.get("relativeDateFormat");e=i.has(t,n)?t[n]:i.isFunction(n)?n.call(null,a(t.timestamp),i.extend({},t)):a(t.timestamp).format(n);var r=this.$timestamp.find(".formatted-timestamp");r.length?r.text(e):this.$timestamp.text(e)}}})}),define("tmpl!status-twitter",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="body">\n  ',klout&&(__p+="\n    "+(null==(__t=kloutHtml)?"":__t)+"\n  "),__p+='\n  <a href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'" class="avatar">\n    <img src="'+__e(user.profile_image_url_https)+'" alt="" />\n  </a>\n  <div class="content">\n    <a href="https://twitter.com/'+__e(user.screen_name)+"/status/"+__e(id_str)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <i class="permalink-logo icon-twitter-logo"></i> <span class="timestamp"></span>\n      </span>\n    </a>\n    <a class="author" href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'">\n      <span class="primary-name">'+__e(user.name),user.verified&&(__p+='<span class="verified"><i class="icon-twitter-verified-bg"></i><i class="icon-twitter-verified-check" title="Verified profile"></i></span>'),__p+='</span>\n      <span class="secondary-name"><span class="prefix">@</span>'+__e(user.screen_name)+'</span>\n    </a>\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+="\n\n    ",retweet&&(__p+='\n      <div class="retweeted-by"><i class="retweeted-by-icon icon-twitter-retweet"></i> <span class="retweeted-by-label" title="Retweeted">Retweeted</span> by <a href="https://twitter.com/intent/user?screen_name='+__e(retweeted_by_user.screen_name)+'" class="retweeted-by-user">',print(retweeted_by_user.name||retweeted_by_user.screen_name),__p+="</a></div>\n    "),__p+='\n\n    <div class="meta">\n      ',place&&(__p+='\n        <span class="place"><i class="icon-place"></i> '+__e(place.full_name)+"</span>\n      "),__p+='\n\n      <div class="intents">\n        <a href="'+__e(replyUrl)+'" class="intent intent-reply" title="Reply"><i class="intent-icon intent-icon-reply icon-twitter-reply"></i> <span class="intent-text">Reply</span></a>\n        <a href="'+__e(retweetUrl)+'" class="intent intent-retweet" title="Retweet"><i class="intent-icon intent-icon-retweet icon-twitter-retweet"></i> <span class="intent-text">Retweet</span></a>\n        <a href="'+__e(favUrl)+'" class="intent intent-favorite" title="Like"><i class="intent-icon intent-icon-favorite icon-twitter-like"></i> <span class="intent-text">Like</span></a>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-twitter"})}),define("lib/views/TwitterStatusView",["require","lib/views/StatusView","tmpl!status-twitter"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-twitter");return e(["twitter-widgets","twitter-impressions"]),t.extend({template:n,className:t.prototype.className+" twitter twitter-custom-tweet",hasLoggedImpression:!1,attributes:function(){return{"data-network":"twt","data-network-id":this.model.get("id_str")}},render:function(){return t.prototype.render.apply(this,arguments),this.renderImpressionTracking(),this},renderImpressionTracking:function(){var t=this;return this.$el.attr("data-twitter-tweet-id",this.model.get("entity_id")),this.$el.attr("data-twitter-tweet-context",""),this.$el.attr("data-partner","spredfast"),e(["twitter-impressions"],function(){twttr.impressions.ready(function(){t.hasLoggedImpression||(t.hasLoggedImpression=!0,twttr.impressions.logTweets(t.el))})}),this}})}),define("tmpl!status-facebook",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="https://www.facebook.com/'+__e(from.id)+'" class="avatar"><img src="https://api.massrelevance.com/avatar/facebook?user_id='+__e(from.id)+'" alt="" /></a>\n  <div class="content">\n    <a href="'+__e(permalink)+'" class="permalink">\n      <i class="permalink-logo icon-facebook-logo"></i>\n    </a>\n    <div class="author">\n      ',__p+=formattedStory?'\n        <div class="fb-story">'+(null==(__t=formattedStory)?"":__t)+"</div>\n      ":'\n        <a href="https://www.facebook.com/'+__e(from.id)+'" class="primary-name">'+__e(from.name)+"</a>\n      ",__p+='\n    </div>\n\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="intents">\n        ',obj.action_available.comment&&(__p+='\n          <a href="'+__e(permalink)+'/comments"\n            data-app_id="'+__e(config.fbapp_id)+'"\n            data-post_id="'+__e(facebook_id)+'"\n            data-message="'+__e(originalStatus.message)+'"\n            data-name="'+__e(originalStatus.name)+'"\n            data-caption="'+__e(originalStatus.caption)+'"\n            data-link="'+__e(originalStatus.link)+'"\n            data-picture="'+__e(originalStatus.picture)+'"\n            data-photourl="'+__e(originalStatus.photo_url)+'"\n            data-description="'+__e(originalStatus.description)+'"\n            data-post_type="'+__e(originalStatus.type)+'"\n            data-author_id="'+__e(from.id)+'"\n            data-author="'+__e(from.name)+'"\n            data-permalink="'+__e(permalink)+'"\n            class="intent fb-intent intent-comment fb-comment-intent mr-action-click"\n            data-action="fb-comment"\n            data-timestamp="'+__e(formattedDate.timestamp)+'"\n            title="Comment">Comment</a> \n        '),__p+="\n\n        ",obj.author&&author.is_page>0&&(__p+='\n          <a href="'+__e(permalink)+'/likes" data-id="'+__e(facebook_id)+'" data-liked="false" class="intent fb-intent intent-like mr-action-click" data-action="fb-like" title="Like">Like</a> \n        '),__p+='\n\n        <a href="'+__e(permalink)+'/share" data-link="'+__e(permalink)+'" data-name="'+__e(originalStatus.message||permalink)+'" class="intent fb-intent intent-share mr-action-click" data-action="fb-share" title="Share">Share</a> \n      </span>\n      <a href="'+__e(permalink)+'" class="timestamp permalink"></a>\n      ',place&&(__p+='\n        <span class="location">near '+__e(place.full_name)+"</span>\n      "),__p+="\n    </div>\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-facebook"})}),define("lib/views/FacebookStatusView",["require","lib/views/StatusView","lib/facebookApi","tmpl!status-facebook"],function(e){var t=e("lib/views/StatusView"),n=e("lib/facebookApi"),i=e("tmpl!status-facebook");return t.extend({template:i,className:t.prototype.className+" facebook",attributes:function(){return{"data-network":"fb","data-network-id":this.model.get("facebook_id")}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.on("liked",function(e){e.text("Unlike")}),this.on("unliked",function(e){e.text("Like")}),n.init()},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("lib/instagramApi",["require","jquery","lodash","backbone-amd","q","./RespondingWindow"],function(e){var t=e("jquery"),n=e("lodash"),i=e("backbone-amd"),r=e("q"),a=e("./RespondingWindow"),o=i.Model.extend({defaults:function(){return{instagramApiUrl:"https://api.instagram.com/v1",intentDomain:"//massrelevance.com",accessToken:null}},initialize:function(){this.$body=t("body"),this.setAccessToken(),this.$body.trigger("instagram:ready")},setAccessToken:function(e){e?document.cookie="mr_inst_token="+encodeURIComponent(e):this.set("accessToken",document.cookie.replace(/(?:(?:^|.*;\s*)mr_inst_token\s*\=\s*([^;]*).*$)|^.*$/,"$1"))},likeIntent:function(e){var t=this,n=r.defer();return e=e||{},this.authenticate().then(function(n){return t._postLike(n,e)}).then(function(e){n.resolve(e)}).fail(function(){n.reject()}),n.promise},authenticate:function(){var e=this,t=r.defer();return this.get("accessToken")?t.resolve(this.get("accessToken")):a.getClient().open(this.get("intentDomain")+"/intents/instagram_auth?response_type=code&origin=viz&scope=likes").then(function(n){if(n.error)t.reject(n);else{var i=n.accessToken;e.set("accessToken",i),e.setAccessToken(i),t.resolve(i)}}).fail(function(){t.reject()}),t.promise},_postLike:function(e,i){var a=this,o=r.defer(),s="true"===i.liked,l=n.extend({"delete":s},i);return l.access_token=e,r(t.ajax({crossDomain:!0,dataType:"jsonp",url:this.get("intentDomain")+"/intents/instagram_like.json",data:l})).then(function(t){if(t.meta&&400===t.meta.code){if("OAuthParameterException"===t.meta.error_type)return a.deauthenticate(),a.authenticate().then(function(){return a._postLike(e,i)}).then(function(e){o.resolve(e)}).fail(function(){o.reject()})}else{var n=i.id||"unknown";a.trigger(s?"unlike":"like",n),o.resolve(!s)}}).fail(function(){o.reject()}),o.promise},deauthenticate:function(){this.set("accessToken",""),document.cookie="mr_inst_token=; expires=Thu, 01 Jan 1970 00:00:00 GMT;"}});a.init();var s;return{getClient:function(){if(!s)throw new Error("You must call instagramApi.init() before calling getClient()");return s},init:function(){s||(s=new o)}}}),define("tmpl!status-instagram",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="left-content">\n    <a href="https://instagram.com/'+__e(user.username)+'" class="avatar">\n      <img src="'+__e(user.profile_picture)+'" alt="" />\n    </a>\n\n    <div class="author">\n      <a href="https://instagram.com/'+__e(user.username)+'" class="primary-name">'+__e(user.username)+'</a>\n\n      <a href="'+__e(link)+'" class="timestamp permalink"></a>\n    </div>\n\n    ',place&&place.name&&(__p+='\n      <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n    "),__p+='\n  </div>\n\n  <div class="content">\n\n    <div class="media-container">\n      <a href="'+__e(link)+'" class="permalink">\n        <i class="permalink-logo icon-instagram-logo"></i>\n      </a>\n\n      ',media.length>0&&(__p+="\n        "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n      "),__p+='\n    </div>\n\n    <div class="text">',caption&&(__p+=null==(__t=caption.text)?"":__t),__p+='</div>\n\n    <div class="meta">\n      <span class="intents">\n        <a href="#" data-id="'+__e(id)+'" data-liked="false" class="intent instagram-intent intent-like mr-action-click" data-action="instagram-like" data-link="'+__e(link)+'" title="Like">\n          <i class="icon icon-instagram-like"></i>\n          Like\n        </a>\n      </span>\n      ',place&&place.name&&(__p+='\n        <span class="location">near '+__e(place.name)+"</span>\n      "),__p+="\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-instagram"})}),define("lib/views/InstagramStatusView",["require","lodash","jquery","lib/views/StatusView","lib/instagramApi","tmpl!status-instagram"],function(e){var t=e("lodash"),n=e("jquery"),i=e("lib/views/StatusView"),r=e("lib/instagramApi"),a=e("tmpl!status-instagram");return i.extend({template:a,className:i.prototype.className+" instagram",_positionAndShowIconHandler:null,attributes:function(){return{"data-network":"inst","data-network-id":this.model.get("id")}},initialize:function(){i.prototype.initialize.apply(this,arguments),r.init()},render:function(){return i.prototype.render.apply(this,arguments),this.$icon=this.$(".permalink"),this.$container=this.$(".media-container"),this.$img=this.$(".media img"),this.positionAndShowIcon(),this._positionAndShowIconHandler=t.debounce(t.bind(this.positionAndShowIcon,this),50),this.$img.one("load",this._positionAndShowIconHandler),n(window).on("resize",this._positionAndShowIconHandler),this},positionAndShowIcon:function(){var e=2;this.$img.length>0&&(e=this.$container.width()-this.$img.position().left-this.$img.width()+2),this.$icon.css({right:e+"px",visibility:"visible"})},remove:function(){return i.prototype.remove.apply(this,arguments),this.$img.off("load",this._positionAndShowIconHandler),n(window).off("resize",this._positionAndShowIconHandler),this}})}),define("tmpl!status-google",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="author">\n    <a href="'+__e(url)+'" class="permalink">\n      <i class="permalink-logo icon-google-plus-logo"></i>\n    </a>\n    <a href="'+__e(actor.url)+'" class="avatar">\n      <img src="'+__e(actor.image.url)+'" alt="" />\n    </a>\n    <a href="'+__e(actor.url)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n    <a href="'+__e(url)+'" class="timestamp permalink"></a>\n    ',place&&(__p+='\n      <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n    "),__p+='\n  </div>\n\n  <div class="content">\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n    \n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n      </span>\n    </div>\n\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-google"})}),define("lib/views/GoogleStatusView",["require","lib/views/StatusView","tmpl!status-google"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-google");return t.extend({template:n,className:t.prototype.className+" google",attributes:function(){return{"data-network":"ggl","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-getglue",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="'+__e(actor.link)+'" class="avatar">\n    <img src="'+__e(actor.image)+'" alt="" />\n  </a>\n  <div class="content">\n    <a href="'+__e(canonical_link)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <span class="timestamp"></span> <i class="permalink-logo permalink-logo-getglue icon-getglue-logo"></i>\n      </span>\n    </a>\n\n    <div class="author">\n      <a href="'+__e(actor.link)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n      <a href="'+__e(actor.link)+'" class="secondary-name">'+__e(actor.preferredUsername)+'</a>\n    </div>\n\n    <div class="text">\n      <p class="text-header text-getglue-'+__e(verb)+'">'+__e(displayName)+"</p>\n      ",status.body&&(__p+=null==(__t=body)?"":__t),__p+="\n    </div>\n\n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n        <a href="'+__e(canonical_link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-getglue icon-getglue-logo"></i>'+__e(formattedDate.full)+"</a>\n        ",status.location&&(__p+='\n          <a href="'+__e(canonical_link)+'" class="place">from '+__e(location.name)+"</a>\n        "),__p+="\n      </span>\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-getglue"})}),define("lib/views/GetglueStatusView",["require","lib/views/StatusView","tmpl!status-getglue"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-getglue");return t.extend({template:n,className:t.prototype.className+" getglue",attributes:function(){return{"data-network":"glue","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-rss",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="content">\n    <a href="'+__e(link)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <span class="timestamp"></span><i class="permalink-logo permalink-logo-rss icon-rss-logo"></i>\n      </span>\n    </a>\n\n    <div class="title"><a href="'+__e(link)+'">'+__e(title)+'</a></div>\n    <div class="author">\n      <span class="primary-name">'+__e(author)+'</span>\n    </div>\n    <div class="text">'+(null==(__t=description)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n        <a href="'+__e(link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-rss icon-rss-logo"></i>'+__e(formattedDate.full)+"</a>\n        ",status.location&&(__p+='\n          <a href="'+__e(link)+'" class="place">from '+__e(location.name)+"</a>\n        "),__p+="\n      </span>\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-rss"})}),define("lib/views/RssStatusView",["require","lib/views/StatusView","tmpl!status-rss"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-rss");return t.extend({template:n,className:t.prototype.className+" rss",attributes:function(){return{"data-network":"rss","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-youtube",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="'+__e(link)+'" class="permalink">\n    <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n      <i class="permalink-logo icon-youtube-logo"></i> <span class="timestamp"></span>\n    </span>\n  </a>\n\n  <div class="title">"'+__e(title)+'"</div>\n\n  <div class="player">\n    ',media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <span class="attribution">\n      <span class="attribution-label">by</span>\n      <a class="author" href="//youtube.com/channel/'+__e(snippet.channelId)+'">'+__e(channelTitle)+'</a>\n    </span>\n\n    <span class="duration">'+__e(formattedDuration)+"</span>\n  </div> \n</div>";return __p},metadata:{customizable:!0},name:"status-youtube"})}),define("lib/views/YoutubeStatusView",["require","lib/views/StatusView","tmpl!status-youtube"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-youtube");return t.extend({template:n,className:t.prototype.className+" youtube",attributes:function(){return{"data-network":"youtube","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("lib/views/statusViewFactory",["lib/views/StatusView","lib/views/TwitterStatusView","lib/views/FacebookStatusView","lib/views/InstagramStatusView","lib/views/GoogleStatusView","lib/views/GetglueStatusView","lib/views/RssStatusView","lib/views/YoutubeStatusView"],function(e,t,n,i,r,a,o,s){var l=function(t,n){var i;if("undefined"==typeof n&&(n=l.constructors),t){var r=t.get("sourceName");void 0!==n[r]&&(i=n[r])}return void 0===i&&(i=e),i};return l.constructors={twitter:t,facebook:n,instagram:i,google:r,getglue:a,rss:o,youtube:s},l.factory=function(e){return function(){return l.apply(this,arguments).extend({defaults:e||{}})}},l}),define("tmpl!stream",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="stream-body">\n  <div class="new-content-button">'+__e(new_content_text_prefix)+' <span class="num-new-content">0</span> '+__e(new_content_text_suffix)+'</div>\n</div>\n<div class="no-content-message">'+__e(no_content_text)+'</div>\n<div class="loading-indicator"></div>\n';return __p},metadata:{},name:"stream"})}),define("componentStyle!stream-1",{render:function(){}}),define("components/stream-1/main",["jquery","lodash","backbone-amd","q","ENV","massrel-js-backbone-2","lib/BaseComponent","lib/views/BaseView","lib/views/statusViewFactory","tmpl!stream","componentStyle!stream-1","moment"],function(e,t,n,i,r,a,o,s,l,c,u,d){var h=n.Model.extend({defaults:{stopped:!0,paused:!1},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments);return e.statuses=this.get("statuses").toJSON(),e}}),p=s.extend({type:"stream",template:c,className:"stream",conditionalClasses:{no_content:"no-content",loading:"loading",has_new_content:"new-content",infinite_scroll:"infinite-scroll"},events:{"click .new-content-button":"_showNewContent"},initialize:function(e){return s.prototype.initialize.apply(this,arguments),this.model&&this.model.on("change",t.debounce(t.bind(this.updateClasses,this),50)),e.showNewContent&&(this.showNewContent=e.showNewContent),this},_showNewContent:function(){return this.showNewContent?this.showNewContent.apply(this,arguments):void 0},updateClasses:function(){var e=this;t.each(e.conditionalClasses,function(t,n){e.model.get(n)?e.$el.addClass(t):e.$el.removeClass(t)})},render:function(){return s.prototype.render.apply(this,arguments),this.updateClasses(),this.$el.addClass(this.className),this.$body=this.$el.find(".stream-body"),this.$numNewContent=this.$el.find(".num-new-content"),this}}),m=function(e,i,r){var a=this;a.id=e,a.config=i,a.dispatcher=r,a.scrolling=t.debounce(a._scrolling,a.config.settings.scrolling_interval,!0),a.scrolled=t.debounce(a._scrolled,a.config.settings.scrolling_interval),a.config.settings=t.extend({},i.settings),a.statuses=new n.Collection;var o=t.extend({},a.config.settings,{loading:!0,no_content:!1,statuses:a.statuses});a.model=new h(o),a.view=new p({dispatcher:a.dispatcher,el:document.getElementById(e),model:a.model,showNewContent:t.bind(a.showNewContent,a),componentId:e,componentType:a.config.type}),a.view.render(),a.setScrollContainer(a.view.$el)};m.prototype.createPoller=function(){var e=this;e.poller=new a.StreamPoller(e.model.pick(["stream_name","frequency","limit","replies","network","klout","keywords","embed_media","avatar_resolution","from","timeframe","strip_links"])),e.model.get("media_only")&&e.filter(function(e){var t=e.get("media");return"undefined"!=typeof t&&t.length>0}),e.model.get("replies_only")&&e.filter(function(e){return e.get("reply")||e.get("in_reply_to")}),e.poller.queue.on("add",t.bind(e.statusAdded,e)),e.poller.moreQueue.on("add",t.bind(e.statusAdded,e)),e.poller.once("loaded-batch",function(){e.batch().then(function(){e.model.get("infinite_scroll")?e.ensureFilled().fin(function(){e.model.set("loading",!1),e.attachScrollHandlers()}):e.model.set("loading",!1),e.poller.on("loaded-batch",function(){e.dispatcher.trigger("queued",e.poller.queue.length);var t=e.model.get("pause_threshold");0!==t&&e.poller.queue.length>=t&&e.pause(),e.model.get("auto_step")&&e.autoStep()})})});var n=this.model.get("resume_threshold");0!==n&&e.dispatcher.on("#"+e.id+":batched #"+e.id+":stepped",function(){e.model.get("paused")&&n>=e.poller.queue.length&&e.resume()}),e.poller.on("loading-more",function(){e.model.set("loadingMore",!0),e.dispatcher.trigger("loading-more")}),e.poller.on("loaded-more",function(){e.model.set("loadingMore",!1),e.processMoreQueue(),e.dispatcher.trigger("loaded-more")}),e.poller.on("end-of-data",function(){e.model.set("loadingMore",!1)}),e.poller.on("end-of-data no-data",function(){e.model.set("infinite_scroll",!1),e.model.set("loading",!1)}),e.poller.on("no-data",function(){e.model.set("no_content",!0)}),e.model.get("show_new_content_button")&&!e.model.get("auto_step")&&e.dispatcher.on("#"+e.id+":queued #"+e.id+":stepped #"+e.id+":batched",t.bind(e.updateNewContentButton,e)),e.model.get("content_limit")&&e.dispatcher.on("#"+e.id+":prepended-status",t.bind(e.enforceContentLimit,e))},m.prototype.statusAdded=function(e){var t=this,n=t.model.get("tweet_original_referer");n&&e.get("sourceNetwork").twitter&&e.set("original_referer",n)},m.prototype.filter=function(e){var t=this;t.poller.filter(e)},m.prototype.start=function(){var e=this;e.createPoller(),e.model.set("infinite_scroll",e.config.settings.infinite_scroll),e.model.set("no_content",!1),e.model.set("has_new_content",!1),e.model.set("loading",!0),e.model.set("stopped",!1),e.model.set("paused",!1),e.timeFilter&&e.filter(e.timeFilter),e.poller.start(),e.dispatcher.trigger("started")},m.prototype.pause=function(){var e=this;e.poller.stop(),e.model.set("paused",!0),e.dispatcher.trigger("paused")},m.prototype.resume=function(){var e=this;e.poller.start(),e.model.set("paused",!1),e.dispatcher.trigger("resumed")},m.prototype.stop=function(){var e=this;if(void 0!==e.stopInProcess&&e.stopInProcess.isPending())return e.stopInProcess;e.model.set("stopped",!0);var t=i.defer();e.stopInProcess=t.promise,void 0!==e.poller&&e.poller.stop(),void 0!==e.poller&&(e.poller.off(),e.poller.queue.off(),e.poller.moreQueue.off()),e.dispatcher.off(null,e.selectNetwork);var n=function(){t.resolve(),e.dispatcher.trigger("stopped")};return e.queueItemInProcess||e.moreQueueInProcess||e.clearInProcess?i.allSettled([e.queueItemInProcess,e.moreQueueInProcess,e.clearInProcess]).then(n):n(),e.stopInProcess},m.prototype.clear=function(){var e=this;if(void 0===e.clearInProcess||!e.clearInProcess.isPending()){var t,n=[];for(e.detachScrollHandlers();e.statuses.length>0;)t=e.statuses.first(),n.push(e.action("shift",t.get("view")));e.clearInProcess=i.all(n),e.clearInProcess.then(function(){e.$scrollContainer.scrollTop(0),e.dispatcher.trigger("cleared")})}return e.clearInProcess},m.prototype.more=function(){var e=this;if(!e.model.get("loadingMore")){var t=i.defer();return e._more(0,t),t.promise}},m.prototype._more=function(e,t){var n=this;5>e?(n.poller.more(),n.poller.once("loaded-more",function(i){0===i?n._more(e+1,t):t.resolve()})):(n.model.set("infinite_scroll",!1),t.reject())},m.prototype.processMoreQueue=function(){var e=this;if(void 0===e.moreQueueInProcess||!e.moreQueueInProcess.isPending()){var t=[];if(e.model.get("stopped")){var n=i.defer();n.reject(),e.moreQueueInProcess=n.promise}else{for(;e.poller.moreQueue.length>0;)t.push(e.processMoreQueueItem());e.moreQueueInProcess=i.all(t)}}return e.moreQueueInProcess},m.prototype.processMoreQueueItem=function(){var e,t=this;if(t.poller.moreQueue.length>0&&!t.model.get("stopped"))e=t.action("append",t.createStatus(t.poller.moreQueue.shift()));else{var n=i.defer();n.reject(),e=n.promise}return e},m.prototype.batch=function(e){var t=this;("undefined"==typeof e||1>e||e>t.poller.queue.length)&&(e=t.poller.queue.length);for(var n=[],r=0;e>r;r++)n.push(t.insertQueueItem(t.poller.queue.pop()));var a=i.all(n);return a.then(function(){t.dispatcher.trigger("batched",t.poller.queue.length)}),a},m.prototype.step=function(){var e=this,t=i.defer(),n=function(){e.dispatcher.trigger("stepped",e.poller.queue.length),t.resolve()};if(e.poller.queue.length>0&&!e.model.get("stopped")){var r=e.insertQueueItem(e.poller.queue.pop());r.fin(n)}else t.reject();return t.promise},m.prototype.insertQueueItem=function(e){var t=this;return t.queueItemInProcess=t.action("prepend",t.createStatus(e)),t.queueItemInProcess},m.prototype.autoStep=function(){var e=this;if(0!==e.poller.queue.length){var n=function(){e.model.get("stopped")||(e.queueIntervalTimeout=window.setTimeout(t.bind(e.autoStep,e),e.model.get("interval")))};e.insertQueueItem(e.poller.queue.pop()).fin(n)}},m.prototype.enforceContentLimit=function(){var e=this;e.statuses.length>e.model.get("content_limit")&&e.action("pop",e.statuses.last().get("view"))},m.prototype.ensureFilled=function(){var e=this,t=i.defer();return e._ensureFilled(0,t),t.promise},m.prototype._ensureFilled=function(e,t){var n=this;5>e?n.$scrollContainer[0].scrollHeight<n.$scrollContainer.outerHeight()+50?(n.more(),n.poller.once("loaded-more",function(){n._ensureFilled(e+1,t)})):t.resolve():(n.model.set("infinite_scroll",!1),t.reject())},m.prototype.createStatus=function(e){var t=this,n=l(e),i=n.prototype.className;e.get("in_reply_to")&&(i+=" reply"),e.get("reply")&&(i+=" reply-parent");var r=new n({className:i,parent:t.view,model:e});return e.set("view",r),r};var f={append:{$:"append",render:!0,collection:"push",event:"appended-status"},prepend:{$:"prepend",render:!0,collection:"unshift",event:"prepended-status"},pop:{$:"remove",collection:"remove",event:"popped-status"},shift:{$:"remove",collection:"remove",event:"shifted-status"}};return m.prototype.action=function(e,t){var n=this,r=!1,a=i.defer();("undefined"==typeof e||void 0===f[e])&&(e="prepend");var o=f[e];n.statuses[o.collection](t.model);var s=function(){n.dispatcher.trigger(o.event,t)};a.promise.then(s);var l;return l="remove"===o.$?function(e){e.remove()}:function(e){n.view.$body[o.$](e)},o.render&&t.render(),n[e].call({async:function(){return r=!0,a.resolve},stream:n},t,l),r||a.resolve(),a.promise},m.prototype.prepend=function(e,t){t(e.$el)},m.prototype.append=function(e,t){t(e.$el)},m.prototype.pop=function(e,t){t(e.$el)},m.prototype.shift=function(e,t){t(e.$el)},m.prototype.setStream=function(e){var n=this;n.model.get("stream_name")!==e&&(n.model.set("stream_name",e),n.stop().then(t.bind(n.clear,n)).then(function(){n.model.get("stream_name")===e&&n.start()}))},m.prototype.setTimeRange=function(e,n,i){var r=this,a=r.model.get("timeframe")||{start:null,finish:null},o=!1;i?r.filteredStartTime!==e&&(r.filteredStartTime=e,r.timeFilter=function(e){var t;return e.get("created_at")?t=new d(e.get("created_at"),"ddd MMM DD HH:mm:ss ZZ YYYY").unix():"instagram"===e.get("network")&&e.get("created_time")?t=parseInt(e.get("created_time"),10):"facebook"===e.get("network")&&e.get("created_time")?t=new d(e.get("created_time")).unix():e.get("published")&&(t=new d(e.get("published")).unix()),t>=r.filteredStartTime?e:!1},a.start="undefined",o=!0,e="undefined"):a.start!==e&&(a.start=e,o=!0),a.finish!==n&&(a.finish=n,o=!0),o&&(r.model.set("timeframe",a),r.stop().then(t.bind(r.clear,r)).then(function(){r.model.get("timeframe").start===e&&r.model.get("timeframe").finish===n&&r.start()}))},m.prototype.setFrom=function(e){var n=this;n.model.get("from")!==e&&(n.model.set("from",e),n.stop().then(t.bind(n.clear,n)).then(function(){n.model.get("from")===e&&n.start()}))},m.prototype.setKeywords=function(e){var n=this;n.model.get("keywords")!==e&&(n.model.set("keywords",e),n.stop().then(t.bind(n.clear,n)).then(function(){n.model.get("keywords")===e&&n.start()}))},m.prototype.selectNetwork=function(e){var n=this;n.model.get("network")!==e&&(n.model.set("network",e),n.stop().then(t.bind(n.clear,n)).then(function(){n.model.get("network")===e&&n.start()}))},m.prototype.showNewContent=function(){var e=this;e.model.set("has_new_content",!1),e.batch()},m.prototype.updateNewContentButton=function(){var e=this;e.view.$numNewContent.text(e.poller.queue.length),e.poller.queue.length>0?e.model.set("has_new_content",!0):e.model.set("has_new_content",!1)
},m.prototype.setScrollContainer=function(n){var i=this;i.$scrollContainer?i.detachScrollHandlers():e(window).on("resize",t.bind(i.scrolled,i)),i.$scrollContainer=n,i.attachScrollHandlers()},m.prototype.attachScrollHandlers=function(){var e=this;e.scrollHandlersActive=!0,e.$scrollContainer.on("scroll.massrel-stream",t.bind(e.scrolled,e)),e.$scrollContainer.on("scroll.massrel-stream",t.bind(e.scrolling,e)),e.$scrollContainer.on("scroll.massrel-stream",t.bind(e.infiniteScroll,e))},m.prototype.detachScrollHandlers=function(){var e=this;e.$scrollContainer.off("scroll.massrel-stream"),e.scrollHandlersActive=!1},m.prototype._scrolling=function(){var e=this;e.scrollHandlersActive&&e.dispatcher.trigger("scrolling")},m.prototype._scrolled=function(){var e=this;e.scrollHandlersActive&&e.dispatcher.trigger("scrolled")},m.prototype.infiniteScroll=t.debounce(function(){var e=this;e.scrollHandlersActive&&e.model.get("infinite_scroll")&&e.view.$el.find(".status").length>0&&e.$scrollContainer.scrollTop()+e.$scrollContainer.innerHeight()>=e.$scrollContainer[0].scrollHeight-50&&e.more()},250),o.extend({styles:u,initialize:function(){o.prototype.initialize.apply(this,arguments);var e=this.get("config");this._statusViewFactory=l.factory({componentId:e.id,componentType:e.type,analytics:this.get("analytics"),dispatcher:this.get("dispatcher")})},exports:{Stream:m,StreamView:p},create:function(){var e=this,t=new m(this.get("id"),this.get("config"),this.get("dispatcher"));return this.set("stream",t),{stream:t,statusViewFactory:e._statusViewFactory}},render:function(){this.hasElement()&&this.get("config").settings.start_immediately&&this.get("stream").start()}}).exports()}),define("components/network-selector-bar-1/views/NetworkSelectorView",["lodash","jquery","ENV","lib/views/BaseView"],function(e,t,n,i){return i.extend({className:"network-selector",events:{"click .network":"clickNetwork"},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.dispatcher=e.dispatcher?e.dispatcher:n.instance;var t;t=e.dispatcher&&e.dispatcher.id?"#"+e.dispatcher.id+":select-network":"select-network",this.listenTo(this.dispatcher,t,this.updateActive),this.listenTo(this.model,"change:network",this.trackNetworkChange)},updateActive:function(e){this.$el.find(".network.active").removeClass("active"),this.$el.find('.network[data-network="'+e.payload+'"]').addClass("active")},clickNetwork:function(e){var n=t(e.currentTarget).attr("data-network");this.model.set("network",n),this.dispatcher.trigger("select-network",n)},trackNetworkChange:function(){this.analytics().trackEvent({category:"viz:toggle",action:"source",label:this.model.get("network")})}})}),define("tmpl!network-selector-bar",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)_.each(networks,function(e){__p+='<li class="',e.active&&(__p+=" active "),__p+=" "+__e(e.name)+' network" data-network="'+__e(e.name)+'"><i class="icon icon-'+__e(e.icon)+'-logo"></i> <span class="network-name">'+__e(networkDisplayNames[e.name])+"</span></li>"}),__p+="\n";return __p},metadata:{},name:"network-selector-bar"})}),define("components/network-selector-bar-1/views/NetworkSelectorBarView",["components/network-selector-bar-1/views/NetworkSelectorView","tmpl!network-selector-bar"],function(e,t){return e.extend({className:e.prototype.className+" network-selector-bar",template:t})}),define("components/network-selector-bar-1/models/NetworkSelectorModel",["lodash","backbone-amd"],function(e,t){var n=["twitter","facebook","instagram","google_plus","getglue","youtube"],i={twitter:"twitter",facebook:"facebook",google_plus:"google-plus",getglue:"getglue",instagram:"instagram",youtube:"youtube"},r=t.Model.extend({defaults:{name:"",active:!1},constructor:function(e,n){"undefined"==typeof n&&(n={}),n.parse=!0,t.Model.call(this,e,n)},parse:function(e){return"[object String]"===Object.prototype.toString.apply(e)?{name:e,icon:i[e]}:e}}),a=t.Collection.extend({model:r});return t.Model.extend({defaults:function(){return{networkDisplayNames:{twitter:"Twitter",facebook:"Facebook",instagram:"Instagram",google_plus:"Google",getglue:"GetGlue",youtube:"YouTube"},network:null,networks:null}},constructor:function(i,r){var o;if("undefined"==typeof i&&(i={}),o=e.isArray(i.networks)?i.networks:e.isObject(i.networks)?e.filter(e.map(i.networks,function(e,t){return e?t:""},e.identity)):n,i.networks=new a(o),void 0!==i.network){var s=i.networks.findWhere({name:i.network});s&&s.set("active",!0)}t.Model.call(this,i,r)},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);return e.networks=e.networks.toJSON(),e}})}),define("componentStyle!network-selector-bar-1",{render:function(){}}),define("components/network-selector-bar-1/main",["lodash","lib/BaseComponent","components/network-selector-bar-1/views/NetworkSelectorBarView","components/network-selector-bar-1/models/NetworkSelectorModel","componentStyle!network-selector-bar-1"],function(e,t,n,i,r){var a=function(t,r,a,o){var s=this;s.id=r,s.config=t,s.dispatcher=a,s.view=new n({analytics:o,dispatcher:s.dispatcher,el:document.getElementById(r),model:new i(e.pick(t.settings,["network","networks"]))}),s.view.$el.addClass(s.view.className)};return a.prototype.render=function(){var e=this;e.view.render()},t.extend({styles:r,exports:{NetworkSelectorBar:a,NetworkSelectorBarView:n,NetworkSelectorModel:i},create:function(){var e=new a(this.get("config"),this.get("id"),this.get("dispatcher"),this.get("analytics"));return this.set("networkSelector",e),{networkSelector:e}},render:function(){this.hasElement()&&this.get("networkSelector").render()}}).exports()}),define("components/tweet-button-1/models/TweetButtonModel",["lodash","backbone-amd","twitter-text","massrel-js"],function(e,t,n,i){return t.Model.extend({defaults:{tweetLength:0,buttonStyle:"color",buttonBorderRadius:3,hashtags:"",text:"",original_referer:i.intents.original_referer,buttonText:"Tweet",related:"",url:null,disabled:!1},constructor:function(n,i){var r=this;n=e.pick(n,e.keys(r.defaults)),t.Model.call(r,n,i),r.updateRelatedUsers(),r.generateUrl(),r.updateTweetLength(),r.on("change:hashtags change:text change:original_referer change:related change:url",e.bind(r.generateUrl,r)),r.on("change:text change:hashtags change:url",e.bind(r.updateTweetLength,r)),r.on("change:related",e.bind(r.updateRelatedUsers,r))},set:function(e){e.hashtags&&(e.hashtags=e.hashtags.replace(/#/g,"").replace(/ /g,",")),t.Model.prototype.set.apply(this,arguments)},getTweetString:function(){var t=this.get("text"),n=this.get("url"),i=this.get("hashtags");return n&&(t+=" "+n),i&&(t+=" "+e.map(i.split(","),function(e){return"#"+e}).join(" ")),t},updateTweetLength:function(){this.set("tweetLength",n.getTweetLength(this.getTweetString()))},updateRelatedUsers:function(){var e=this.get("related");e=e.split(" ").join(","),e=e.split("@").join(""),this.set("related",e)},generateUrl:function(){var t=this,n=["text","url","hashtags","original_referer","related"];n=e.reject(n,function(n){return e.isEmpty(t.get(n))}),t.set("intentURL",i.intents.tweet(e.pick(t.toJSON(),n)))}})}),define("tmpl!tweet-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-twitter-logo"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"tweet-button"})}),define("components/tweet-button-1/views/TweetButtonView",["jquery","lib/views/BaseButtonView","components/tweet-button-1/models/TweetButtonModel","tmpl!tweet-button"],function(e,t,n,i){return require(["twitter-widgets"]),t.extend({attributes:{href:""},tagName:"a",tweetAction:"tweet",events:{click:function(){return this.$el.hasClass("disabled")||this.model.get("disabled")?!1:void 0}},className:function(){var e=this.model.get("buttonStyle");return"button twitter tweet-button"+(e?" button-style-"+e:"")},template:i,initialize:function(i){t.prototype.initialize.apply(this,arguments);var r=this;return r.dispatcher=r._closest("dispatcher"),void 0===i.model&&(r.model=new n),require(["twitter-widgets"],function(){twttr.ready(function(){twttr.events.bind("tweet",function(t){e(t.target).data("view-id")===r.cid&&r.dispatcher&&r.dispatcher.trigger(r.tweetAction,r)})})}),r.model.on("change:intentURL",function(){r.$el.attr("href",r.model.get("intentURL"))}),r},render:function(){return t.prototype.render.apply(this,arguments),this.$el.attr("href",this.model.get("intentURL")),this.$el.data("view-id",this.cid),this.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),this}})}),define("componentStyle!tweet-button-1",{render:function(){}}),define("components/tweet-button-1/main",["require","jquery","lib/BaseComponent","components/tweet-button-1/views/TweetButtonView","components/tweet-button-1/models/TweetButtonModel","componentStyle!tweet-button-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("components/tweet-button-1/views/TweetButtonView"),r=e("components/tweet-button-1/models/TweetButtonModel"),a=e("componentStyle!tweet-button-1"),o=function(e,n,a){this.config=e,this.id=n,this.dispatcher=a,this.$el=t("#"+n),this.model=new r(this.config.settings),this.view=new i({dispatcher:a,componentType:e.type,componentId:n,model:this.model})};return o.prototype.render=function(){this.$el.html(this.view.render().el)},n.extend({styles:a,exports:{TweetButton:o,TweetButtonView:i,TweetButtonModel:r},create:function(){var e=new o(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("tweetButton",e),{tweetButton:e}},render:function(){this.hasElement()&&this.get("tweetButton").render()}}).exports()}),define("components/follow-button-1/models/FollowButtonModel",["require","lodash","backbone-amd","massrel-js"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=e("massrel-js");return n.Model.extend({defaults:{buttonStyle:"silver",buttonBorderRadius:3,buttonText:"+",original_referer:i.intents.original_referer,screen_name:"spredfast",disabled:!1},initialize:function(e){this.set(t.pick(e.config,t.keys(this.defaults))),this.on({"change:screen_name":this.generateUrl,"change:original_referer":this.generateUrl}),this.generateUrl()},generateUrl:function(){var e={},t=this.get("original_referer");return t&&(e.original_referer=t),this.set("url",i.intents.user(this.get("screen_name"),e)),this}})}),define("tmpl!follow-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-twitter-logo"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"follow-button"})}),define("components/follow-button-1/views/FollowButtonView",["lib/views/BaseButtonView","components/follow-button-1/models/FollowButtonModel","tmpl!follow-button"],function(e,t,n){return require(["twitter-widgets"],function(){}),e.extend({template:n,className:function(){var e=this.model.get("buttonStyle");return"button twitter follow-button"+(e?" button-style-"+e:"")},tagName:"a",attributes:{href:""},events:{click:function(){return this.$el.hasClass("disabled")||this.model.get("disabled")?!1:void 0}},initialize:function(n){var i=this;void 0===n.model&&(i.model=new t),e.prototype.initialize.apply(this,arguments),i.model.on("change:url",function(){i.$el.attr("href",i.model.get("url"))})},render:function(){var t=this;return e.prototype.render.apply(t,arguments),t.$el.attr("href",t.model.get("url")),t.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),t}})}),define("componentStyle!follow-button-1",{render:function(){}}),define("components/follow-button-1/main",["jquery","lib/BaseComponent","components/follow-button-1/views/FollowButtonView","components/follow-button-1/models/FollowButtonModel","componentStyle!follow-button-1"],function(e,t,n,i,r){var a=function(t,r,a){var o=this;o.config=t,o.id=r,o.dispatcher=a,o.$el=e("#"+r),o.model=new i(o.config.settings),o.view=new n({dispatcher:a,componentType:t.type,componentId:r,model:o.model})};return a.prototype.render=function(){var e=this;e.$el.html(e.view.render().el)},t.extend({styles:r,exports:{FollowButton:a,FollowButtonView:n,FollowButtonModel:i},create:function(){var e=new a(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("followButton",e),{followButton:e}},render:function(){this.hasElement()&&this.get("followButton").render()}}).exports()}),define("components/fb-post-button-1/models/FbPostButtonModel",["lodash","massrel-js","backbone-amd"],function(e,t,n){return n.Model.extend({defaults:function(){return{buttonStyle:"color",buttonBorderRadius:3,buttonText:"Post",link:"",feed:"",name:"",picture:"",caption:"",description:"",message:"",url:"https://massrelevance.com/intents/fb",privacy:{value:"EVERYONE"},disabled:!1}}})}),define("tmpl!fb-post-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-facebook-logo"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"fb-post-button"})}),define("components/fb-post-button-1/views/FbPostButtonView",["lodash","lib/views/BaseButtonView","components/fb-post-button-1/models/FbPostButtonModel","tmpl!fb-post-button","lib/facebookApi"],function(e,t,n,i,r){return t.extend({tagName:"a",className:function(){var e=this.model.get("buttonStyle");return"button mr-action-click facebook fb-post-button"+(e?" button-style-"+e:"")},template:i,attributes:{href:"","data-action":"fb-post"},fbPostAction:"fb-post",handlers:{"fb-post":function(){this.$el.hasClass("disabled")||this.model.get("disabled")||t.prototype.handlers["fb-post"].apply(this,arguments)}},initialize:function(e){var i=this;t.prototype.initialize.apply(this,arguments),void 0===e.model&&(i.model=new n),i.dispatcher=i._closest("dispatcher"),r.init(),r.getClient().on("publish.post",function(e){e.fbPostAction===i.fbPostAction&&i.dispatcher.trigger(i.fbPostAction,e)}),i.updateData(),i.model.on("change",function(){i.updateData()})},updateData:function(){this.$el.data(e.pick(this.model.toJSON(),["link","feed","name","picture","caption","description","message"])),this.$el.data("fbPostAction",this.fbPostAction)},render:function(){return t.prototype.render.apply(this,arguments),this.$el.attr("href",this.model.get("url")),this.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),this}})}),define("componentStyle!fb-post-button-1",{render:function(){}}),define("components/fb-post-button-1/main",["jquery","lib/BaseComponent","components/fb-post-button-1/views/FbPostButtonView","components/fb-post-button-1/models/FbPostButtonModel","componentStyle!fb-post-button-1"],function(e,t,n,i,r){var a=function(t,r,a){var o=this;o.config=t,o.id=r,o.dispatcher=a,o.$el=e("#"+r),o.model=new i(o.config.settings),o.view=new n({dispatcher:a,componentType:t.type,componentId:r,model:o.model})};return a.prototype.render=function(){var e=this;e.$el.html(e.view.render().el)},t.extend({styles:r,exports:{FbPostButton:a,FbPostButtonView:n,FbPostButtonModel:i},create:function(){var e=new a(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("postButton",e),{postButton:e}},render:function(){this.hasElement()&&this.get("postButton").render()}}).exports()}),define("components/fb-like-button-1/models/FbLikeButtonModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:function(){return{action:"like",colorscheme:"light",href:"",kid_directed_site:!1,layout:"button",ref:"spredfast",share:!1,show_faces:!1,width:null}}})}),define("tmpl!fb-like-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="fb-like"\n    data-action="'+__e(action)+'"\n    data-colorscheme="'+__e(colorscheme)+'"\n    data-href="'+__e(href)+'"\n    data-layout="'+__e(layout)+'"\n    data-share="'+__e(share)+'"\n    data-show-faces="'+__e(show_faces)+'"\n    data-width="'+__e(width)+'"\n    data-ref="'+__e(ref)+'"\n></div>\n';return __p},metadata:{},name:"fb-like-button"})}),define("components/fb-like-button-1/views/FbLikeButtonView",["require","lodash","lib/views/BaseView","../models/FbLikeButtonModel","tmpl!fb-like-button","lib/facebookApi"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("../models/FbLikeButtonModel"),r=e("tmpl!fb-like-button"),a=e("lib/facebookApi");return n.extend({tagName:"span",className:"button facebook fb-like-button",template:r,initialize:function(e){e.model||(this.model=new i),this.listenTo(this.model,"change",this.render)},renderFacebookParse:function(){return window.FB.XFBML.parse(),this},render:function(){return n.prototype.render.apply(this,arguments),a.init(t.bind(this.renderFacebookParse,this)),this}})}),define("componentStyle!fb-like-button-1",{render:function(){}}),define("components/fb-like-button-1/main",["require","jquery","lib/BaseComponent","./models/FbLikeButtonModel","./views/FbLikeButtonView","componentStyle!fb-like-button-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./models/FbLikeButtonModel"),r=e("./views/FbLikeButtonView"),a=e("componentStyle!fb-like-button-1"),o=function(e,n,a){this.config=e,this.id=n,this.dispatcher=a,"standard"===e.settings.layout&&(e.settings.layout="button"),this.$el=t("#"+n),this.model=new i(this.config.settings),this.view=new r({dispatcher:a,componentType:e.type,componentId:n,model:this.model})};return o.prototype.render=function(){this.$el.html(this.view.render().el)},n.extend({styles:a,exports:{FbLikeButton:o,FbLikeButtonView:r,FbLikeButtonModel:i},create:function(){var e=new o(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("likeButton",e),{likeButton:e}},render:function(){this.hasElement()&&this.get("likeButton").render()}}).exports()}),define("tmpl!search-box",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<input placeholder="'+__e(placeholder_text)+'" type="search" />\n';return __p},metadata:{},name:"search-box"})}),define("componentStyle!search-box-1",{render:function(){}}),define("components/search-box-1/main",["lodash","backbone-amd","lib/BaseComponent","lib/views/BaseView","tmpl!search-box","componentStyle!search-box-1"],function(e,t,n,i,r,a){var o=i.extend({template:r,className:"search-box",events:{"change input":"changed","keyup input":"keyupped","keydown input":"keydowned","keypress input":"keypressed"},render:function(){return i.prototype.render.apply(this,arguments),this.$el.addClass(this.className),this.$input=this.$el.find("input"),this},changed:function(){this.dispatcher().trigger("change",this.$input.val())},keyupped:function(){this.dispatcher().trigger("keyup",this.$input.val())},keydowned:function(){this.dispatcher().trigger("keydown",this.$input.val())},keypressed:function(e){this.dispatcher().trigger("keypress",this.$input.val()),13===e.keyCode&&this.dispatcher().trigger("enter",this.$input.val())}}),s=t.Model.extend({defaults:{placeholder_text:""}}),l=function(t,n,i){var r=this;r.config=t,r.id=n,r.dispatcher=i,r.model=new s(e.pick(r.config.settings,["placeholder_text"])),r.view=new o({el:document.getElementById(r.id),dispatcher:r.dispatcher,componentId:r.id,componentType:r.config.type,model:r.model})};return l.prototype.render=function(){var e=this;e.view.render()},n.extend({styles:a,exports:{SearchBoxView:o,SearchBoxModel:s,SearchBox:l},create:function(){var e=new l(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("searchBox",e),{searchBox:e}},render:function(){this.hasElement()&&this.get("searchBox").render()}}).exports()}),define("tmpl!stream-selector",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<ul class="stream-selector">\n',_.each(streams,function(e,t){__p+='\n  <li data-index="'+__e(t)+'" data-label="'+__e(e.label)+'" data-value="'+__e(e.stream)+'" class="option ',__p+=selected===e.stream?"active":" inactive ",__p+='" >'+__e(e.label)+"</li>\n"}),__p+='\n</ul>\n<div class="stream-selector-arrow"></div>\n';return __p},metadata:{customizable:!0},name:"stream-selector"})}),define("componentStyle!stream-selector-1",{render:function(){}}),define("components/stream-selector-1/main",["require","lodash","jquery","lib/BaseComponent","lib/views/BaseView","backbone-amd","tmpl!stream-selector","componentStyle!stream-selector-1"],function(e){var t=e("lodash"),n=e("jquery"),i=e("lib/BaseComponent"),r=e("lib/views/BaseView"),a=e("backbone-amd"),o=e("tmpl!stream-selector"),s=e("componentStyle!stream-selector-1"),l=r.extend({template:o,className:"stream-selector-container",events:{"click .option.inactive":"change","click .option.active":"toggleOpen"},initialize:function(){this.listenTo(this.model,"change:selected",this.trackSelectionChange)},trackSelectionChange:function(){var e=this.model.get("selected"),t=this.model.get("streams").findWhere({stream:this.model.get("selected")});t&&(e=t.get("label")),this.analytics().trackEvent({category:"viz:toggle",action:"select",label:e})},change:function(e){var t=n(e.target),i=this.$selector.find(".option.active");i.removeClass("active").addClass("inactive"),t.removeClass("inactive").addClass("active"),t.remove(),this.$selector.prepend(t),this.toggleOpen();var r=t.data("value");this.model.set("selected",r),this.dispatcher().trigger("select-stream",r)},toggleOpen:function(){this.$el.toggleClass("open"),this.$el.hasClass("open")&&this.$el[0].scrollHeight?this.$el.css("height",this.$el[0].scrollHeight):this.$el.css("height","")},render:function(){return r.prototype.render.apply(this,arguments),this.$el.addClass(this.className),this.$selector=this.$el.find(".stream-selector"),this}}),c=a.Model.extend({defaults:{stream:"",label:""}}),u=a.Collection.extend({model:c}),d=a.Model.extend({defaults:{streams:null,selected:null},initialize:function(e){this.set("streams",new u(e.streams)),this.set("selected",this.get("streams").at(0).get("stream"))},toJSON:function(){var e=a.Model.prototype.toJSON.apply(this,arguments);return e.streams&&(e.streams=e.streams.toJSON()),e}}),h=function(e,n,i,r){var a=this;a.id=n,a.config=e,a.dispatcher=i,a.model=new d(t.pick(e.settings,["streams"])),a.view=new l({analytics:r,dispatcher:a.dispatcher,el:document.getElementById(n),model:a.model}),a.view.$el.addClass(a.view.className)};return h.prototype.render=function(){var e=this;e.view.render()},i.extend({styles:s,exports:{StreamSelector:h,StreamSelectorView:l,StreamSelectorModel:d},create:function(){var e=new h(this.get("config"),this.get("id"),this.get("dispatcher"),this.get("analytics"));return this.set("streamSelector",e),{streamSelector:e}},render:function(){this.hasElement()&&this.get("streamSelector").render()}}).exports()}),define("lib/ModalUtils",["require","underscore"],function(e){var t=e("underscore"),n={};return{open:function(e){var i=t.defaults(e||{},{data:{},url:MR.spacePath()+"/modal.html",fallback:t.identity});n=i.data;var r;MR.ENV.hash.embedModals||(r=MR.parent.trigger("modal:open",{url:i.url})),!r&&t.isFunction(i.fallback)&&i.fallback.call(window,i.data)},close:function(){MR.parent.trigger("modal:close")},getData:function(){if(MR.ENV.hash.frame){var e=MR.ENV.hash.frame.split(","),i=t.reduce(e,function(e,t){return e.frames[t]},window.parent);return i.MR.modal.getData()}return n}}}),define("lib/refreshPoller",["require","jquery","has"],function(e){var t=e("jquery");return e("has"),{start:function(e){var n,i;MR.spaceConfig.auto_refresh&&MR.isIndex()&&!function r(){t.get().done(function(t,a,o){var s=o.getResponseHeader("ETag"),l=new Date(o.getResponseHeader("Last-Modified")||"").getTime(),c=n&&s&&n!==s,u=!e&&i&&l&&l>i;return c||u?window.location.reload(!0):(n=s,i=l,s&&setTimeout(r,3e4),void 0)})}()}}}),define("setup",["require","lib/ModalUtils","jquery","underscore","lib/refreshPoller","has","lib/UrlUtils"],function(e){function t(e){return(e+"/").replace(/\/+$/,"/").toLowerCase().replace(/^https?:\/\//,"")}function n(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"","/",window.location.pathname.replace(/^\//,"")].join("")}var i=e("lib/ModalUtils"),r=e("jquery"),a=e("underscore"),o=e("lib/refreshPoller");e("has");var s=e("lib/UrlUtils"),l=navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/);return MR.spacePath=a.memoize(function(){var e=MR.spaceConfig;if(e.path)return e.path;var i=t(n()),r=e.host||(e.client?e.client+".massrel.io":window.location.host),o=e.name||"",s=r+"/"+o;return a.chain(e.cnames||[]).compact().map(t).uniq().sortBy("length").forEach(function(e){0===i.indexOf(e)&&(s=e)}),"//"+s.replace(/\/+$/,"")}),MR.isIndex=function(){return n().replace(/\/(index\.html)?$/,"")===window.location.protocol+MR.spacePath()},MR.isSpaceEmbedded=function(){return!!MR.ENV.hash.parent&&window.parent!==window.self},MR.isCurrentProductPage=function(e){var t=MR.getProductUrls(),n=e.replace(/.*?:\/\//g,"");return a.some(t,function(e){var t=e.replace(/.*?:\/\//g,"");return t.indexOf(n)>=0||n.indexOf(t)>=0})},MR.getProductUrls=function(){var e=MR.ENV.hash["product-url"];return a.isArray(e)||(e=[e]),a.compact(e)},{config:function(){var e=r.Deferred(),t=r.Deferred(),n=!0;return e.done(function(){(MR.isPage||"smart"===MR.ENV.hash.sizing)&&(MR.spaceConfig.smart_size=!0,MR.spaceConfig.auto_size=!1),"auto"===MR.ENV.hash.sizing&&(MR.spaceConfig.smart_size=!1,MR.spaceConfig.auto_size=!0),a.isFunction(window.MR_init)&&window.MR_init.call({async:function(){return n=!1,t.resolve}}),n&&t.resolve()}),MR.isIndex()?r.get().always(function(t,n,i){try{a.extend(MR.spaceConfig,s.getParams(i.getResponseHeader("x-amz-meta-space-config"),!0))}catch(r){}e.resolve()}):e.resolve(),t.promise()},pmcMethods:function(){return{spaceEvent:function(e){e&&e.eventName&&MR.ENV.scope("template").trigger("space:"+e.eventName,e.data)}}},init:function(e){function t(e){var t=parseInt(s.css("margin-top"),10)||0,n=s.offset().top,i=0;n>t&&(i=n-t);var r=e&&s[0].scrollHeight?s[0].scrollHeight:s.outerHeight(!0);return Math.ceil(r+i)}var n,s=r("body"),c=MR.spaceConfig,u=c.auto_size===!1&&!c.smart_size;MR.resize=function(i){if(!u&&MR.isSpaceEmbedded()){var o=a.clone(i||{});o.scrolling===!1?s.css("overflow","hidden"):o.scrolling===!0&&s.css("overflow","auto"),n&&(clearTimeout(n),n=null),a.isUndefined(o.height)&&(o.height=(window.MR_height||r.noop)()||t());var c=!!MR.templateConfig.settings.has_natural_height;c&&(o.naturalHeight=t(!0)),e.run("resize",o),!l&&o.interval&&(n=setTimeout(function(){MR.resize(i)},o.interval))}},u&&(c.height||c.width)&&e.run("resize",a.pick(c,"height","width")),c.smart_size&&MR.resize({interval:300,scrolling:!1}),MR.parent={ready:function(){return!!MR.ENV.hash.parent&&!!MR.ENV.hash["space-id"]&&e.ready()},trigger:function(t,n){return t?(e.run(t,n),MR.parent.ready()):!1},on:function(e,t,n){e&&MR.ENV.instance.on("#template:space:"+e,t,n)},off:function(e,t,n){e&&MR.ENV.instance.off("#template:space:"+e,t,n)}},o.start(),MR.modal=i}}}),define("app",function(){}),window.MR.require=require,window.MR.define=define,window.MR.requirejs=requirejs}(MR.define,MR.require,MR.requirejs);